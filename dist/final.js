(()=>{var e={7211:(e,t,n)=>{const a=n(7988);e.exports={login:async(e,t)=>{try{const{usernameOrEmail:n,password:s}=e.body,{token:o,data:r,user:i,permissions:l}=await a.login(n,s);e.session.healthID=i.health_id,t.status(200).json({token:o,user:i,permissions:l,data:r})}catch(e){t.status(400).json({error:e.message})}},logout:async(e,t)=>{const n=e.user.id,s=e.token,o=e.headers["x-forwarded-for"]||e.ip;try{const r=await a.logout(n,s,o);e.session.destroy((n=>n?t.status(500).json({message:"Logout failed: Session error"}):(e.token=null,t.clearCookie("connect.sid"),t.status(200).json(r))))}catch(e){return t.status(500).json({error:e.message})}},forgetPassword:async(e,t)=>{const{email:n}=e.params;try{const e=await a.forgetPassword(n);t.status(200).json(e)}catch(e){t.status(404).json({error:e.message})}},changePassword:async(e,t)=>{const{oldPassword:n,newPassword:s}=e.body;try{await a.changePassword(e.user.id,n,s),t.status(200).json({message:"Password changed successfully"})}catch(e){t.status(400).json({error:e.message})}},resetPassword:async(e,t)=>{try{await a.resetPassword(e.user.id,e.body.newPassword),t.status(200).json({message:"Password reset successfully"})}catch(e){t.status(400).json({error:e.message})}},refreshToken:async(e,t)=>{try{const n=await a.refreshToken(e.body.token);t.status(200).json({token:n})}catch(e){t.status(400).json({error:e.message})}},upsertOrganization:async(e,t)=>{try{const n=e.body,s=await a.upsertOrganization(n);t.status(s.isNewRecord?201:200).json({message:s.isNewRecord?"Organization created successfully":"Organization updated successfully",data:s})}catch(e){console.error("Error managing organization record:",e),t.status(500).json({error:"Internal Server Error"})}},getOrganization:async(e,t)=>{try{const e=await a.getOrganization();if(!e)return t.status(404).json({message:"Organization not found"});t.status(200).json({data:e})}catch(e){console.error("Error fetching organization:",e),t.status(500).json({error:"Internal Server Error"})}}}},1926:(e,t,n)=>{const a=n(7022);e.exports={createPermissions:async(e,t)=>{try{const n=await a.createPermission(e.body);t.status(201).json(n)}catch(e){t.status(500).json({message:e.message})}},getAllPermissions:async(e,t)=>{try{const e=await a.getAllPermissions();t.status(200).json(e)}catch(e){t.status(500).json({message:e.message})}},getPermissionById:async(e,t)=>{try{const n=e.user.health_id,s=await a.getPermissionById(n,e.params.id);if(!s)return t.status(404).json({message:"Permission not found"});t.status(200).json(s)}catch(e){t.status(500).json({message:e.message})}},updatePermission:async(e,t)=>{try{const n=e.user.health_id;if(0===(await a.updatePermission(n,e.params.id,e.body))[0])return t.status(404).json({message:"Permission not found"});t.status(200).json({message:"Permission updated successfully"})}catch(e){t.status(500).json({message:e.message})}},deletePermission:async(e,t)=>{try{const n=e.user.health_id;if(!await a.deletePermission(n,e.params.id))return t.status(404).json({message:"Permission not found"});t.status(200).json({message:"Permission deleted successfully"})}catch(e){t.status(500).json({message:e.message})}},getAllPermissionsTree:async(e,t)=>{try{console.log(e);const n=await a.getAllPermissionsTree();t.status(200).json({permissionTree:n})}catch(e){t.status(500).json({message:"Error fetching permission tree",error:e.message})}},getUserPermissionTree:async(e,t)=>{try{const{id:n}=e.params,s=await a.getUserPermissionTree(n);t.status(200).json({permissionTree:s})}catch(e){t.status(500).json({message:"Error fetching user permission tree",error:e.message})}}}},633:(e,t,n)=>{const a=n(7686);e.exports={createRoles:async(e,t)=>{try{const n=await a.createRoles(e.body);t.status(201).json({message:"Roles created successfully",roles:n})}catch(e){t.status(500).json({message:e.message})}},assignPermissionsToRole:async(e,t)=>{try{const{roleId:n}=e.params,{permissionIds:s}=e.body,o=await a.assignPermissionsToRole(n,s);t.status(200).json({result:o})}catch(e){t.status(500).json({error:e.message})}},assignPermissionsToUser:async(e,t)=>{try{const{userID:n}=e.params,{permissionIds:s}=e.body;console.log(s);const o=await a.assignPermissionsToUser(n,s);console.log(o),t.status(200).json({result:o})}catch(e){t.status(500).json({error:e.message})}},getAllRoles:async(e,t)=>{try{const n=e.user.health_id,s=await a.getAllRoles(n);t.status(200).json(s)}catch(e){t.status(500).json({message:e.message})}},getRoleById:async(e,t)=>{try{const n=await a.getRoleById(e.params.id);if(!n)return t.status(404).json({message:"Role not found"});t.status(200).json(n)}catch(e){t.status(500).json({message:e.message})}},updateRole:async(e,t)=>{try{const n=e.user.health_id;if(0===(await a.updateRole(n,e.params.id,e.body))[0])return t.status(404).json({message:"Role not found"});t.status(200).json({message:"Role updated successfully"})}catch(e){t.status(500).json({message:e.message})}},deleteRole:async(e,t)=>{try{const n=e.user.health_id;if(!await a.deleteRole(n,e.params.id))return t.status(404).json({message:"Role not found"});t.status(200).json({message:"Role deleted successfully"})}catch(e){t.status(500).json({message:e.message})}}}},864:(e,t,n)=>{const a=n(5428);e.exports={generate:async(e,t)=>{const{email:n}=e.params;if(!n)return t.status(400).json({message:"User email is required"});try{const{secret:e,qrCodeUrl:s}=await a.generateTotp(n);return t.json({secret:e,qrCodeUrl:s})}catch(e){return t.status(500).json({message:"Error generating TOTP",error:e.message})}},verify:async(e,t)=>{const{userToken:n,secret:s}=e.body;return n&&s?a.verifyTotp(n,s)?t.json({message:"Token is valid"}):t.status(401).json({message:"Invalid token"}):t.status(400).json({message:"User token and secret are required"})}}},839:(e,t,n)=>{const a=n(830);e.exports={actionOnIdea:async(e,t)=>{try{const n={ip:e.ip,userId:e.user.id,body:e.body},{action:s,id:o}=e.params,r=await a.actionOnIdea(n,o,s);t.status(201).json({result:r})}catch(e){t.status(400).json({error:e.message})}},ConnectionRequest:async(e,t)=>{try{const{userId:n,targetUserId:s,action:o}=e.params,r=await a.ConnectionRequest(parseInt(n),parseInt(s),o);t.status(201).json({result:r})}catch(e){t.status(400).json({error:e.message})}},getConnectionData:async(e,t)=>{const{userId:n}=e.params,s=e.query.field||null;if(!n&&!s)return t.status(400).json({message:"User ID and field are required"});try{const e=await a.getConnectionData(parseInt(n),s);return t.status(200).json({message:"Accepted Connection requests.",userConnection:e})}catch(e){return console.error(e),t.status(500).json({message:e.message})}},logUserAction:async(e,t)=>{try{const n=await a.logUserAction(e.body);return t.status(201).json(n)}catch(e){return t.status(500).json({error:e.message})}},getUserActions:async(e,t)=>{try{const{userId:n}=e.params,s=await a.getUserActions(n);return t.status(200).json(s)}catch(e){return t.status(500).json({error:e.message})}},getActionsByType:async(e,t)=>{try{const{actionType:n}=e.params,s=await a.getActionsByType(n);return t.status(200).json(s)}catch(e){return t.status(500).json({error:e.message})}},getEntityActions:async(e,t)=>{try{const{entityType:n,entityId:s}=e.params,o=await a.getEntityActions(n,s);return t.status(200).json(o)}catch(e){return t.status(500).json({error:e.message})}},countActionsByType:async(e,t)=>{try{const{actionType:n}=e.params,s=await a.countActionsByType(n);return t.status(200).json({count:s})}catch(e){return t.status(500).json({error:e.message})}},getRecentActions:async(e,t)=>{try{const{limit:n}=e.query,s=await a.getRecentActions(n);return t.status(200).json(s)}catch(e){return t.status(500).json({error:e.message})}},getPopularEntities:async(e,t)=>{try{const{entityType:n}=e.params,s=await a.getPopularEntities(n);return t.status(200).json(s)}catch(e){return t.status(500).json({error:e.message})}},getActionsByDateRange:async(e,t)=>{try{const{startDate:n,endDate:s}=e.params,o=await a.getActionsByDateRange(n,s);return t.status(200).json(o)}catch(e){return t.status(500).json({error:e.message})}},deleteUserAction:async(e,t)=>{try{const{id:n}=e.params;return await a.deleteUserAction(n),t.status(204).json({message:"User action deleted successfully"})}catch(e){return t.status(500).json({error:e.message})}},updateUserAction:async(e,t)=>{try{const{id:n}=e.params,s=e.body,o=await a.updateUserAction(n,s);return t.status(200).json(o)}catch(e){return t.status(500).json({error:e.message})}}}},6550:(e,t,n)=>{const{generateUniqueIDForHealth:a}=n(1925),s=n(2350);e.exports={createUser:async(e,t)=>{try{const n=await s.createUser(e.body);t.status(201).json({message:"User created successfully",user:n})}catch(e){t.status(500).json({message:e})}},verifyCreateUser:async(e,t)=>{try{const{userId:n,launchCode:a}=e.query,o=await s.verifyCreateUser(n,a);t.status(200).json({message:"Account verified successfully!",user:o})}catch(e){t.status(500).json({message:"Verification failed: "+e.message})}},getAllUsers:async(e,t)=>{try{const e=await s.getAllUsers();t.status(200).json(e),t.status(200).json({message:"Fetch all users successfully",user:e})}catch(e){if(!t.headersSent)return t.status(500).json({message:e||"Internal Server Error"})}},getUserById:async(e,t)=>{try{const n=await s.getUserById(e.params.id);if(!n)return t.status(404).json({message:"User not found"});t.status(200).json({message:"User found successfully",user:n})}catch(e){t.status(500).json({message:e.message})}},updateUser:async(e,t)=>{try{if(0===(await s.updateUser(e.params.id,e.body))[0])return t.status(404).json({message:"User not found"});t.status(200).json({message:"User updated successfully",user:e.body})}catch(e){t.status(500).json({message:e})}},deleteUser:async(e,t)=>{try{if(!await s.deleteUser(e.params.id))return t.status(404).json({message:"User not found"});t.status(200).json({message:"User deleted successfully",user:e.params.id})}catch(e){t.status(500).json({message:e.message})}},deleteUserRanges:async(e,t)=>{try{const{start_id:n,end_id:a}=e.params,o=parseInt(n,10),r=parseInt(a,10);if(isNaN(o)||isNaN(r)||o>r)return t.status(400).json({error:"Invalid ID range"});const i=await s.deleteUserRanges(o,r);return t.status(200).json({message:`${i} users deleted successfully.`})}catch(e){return console.error("Error deleting users:",e),t.status(500).json({error:"An error occurred while deleting users"})}},checkUserPermission:async(e,t)=>{try{const{userId:n,permissionName:a}=e.params,o=await s.checkUserPermission(n,a);t.status(200).json({hasPermission:o})}catch(e){t.status(500).json({error:e.message})}}}},3922:(e,t,n)=>{const a=n(5356);e.exports={createUserLog:async(e,t)=>{try{const n=await a.createUserLog(e.user.health_id,e.body);t.status(201).json(n)}catch(e){t.status(400).json({error:e.message})}},getAllUserLogs:async(e,t)=>{try{const n=await a.getAllUserLogs(e.user.health_id);n&&n.length>0?t.json({success:!0,data:n}):t.json({success:!1,message:"No user logs found for this health_id."})}catch(e){console.error("Error fetching user logs:",e.message),t.status(500).json({success:!1,message:e.message})}},getUserLogById:async(e,t)=>{try{const n=await a.getUserLogById(e.user.health_id,e.params.id);if(!n)return t.status(404).json({error:"User Log not found"});t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},updateUserLog:async(e,t)=>{try{const n=await a.updateUserLog(e.user.health_id,e.params.id,e.body);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},deleteUserLog:async(e,t)=>{try{await a.deleteUserLog(e.user.health_id,e.params.id),t.status(204).send()}catch(e){t.status(400).json({error:e.message})}},deleteLogsInRange:async(e,t)=>{const{start_date:n,end_date:s}=e.params;if(!n||!s)return t.status(400).json({error:"startDate and endDate are required."});try{const o=await a.deleteLogsInRange(e.user.health_id,n,s);return 0===o?t.status(404).json({message:"No records found in the specified range."}):t.status(200).json({message:`${o} records deleted successfully.`})}catch(e){return console.error("Error deleting logs:",e),t.status(500).json({error:"An error occurred while deleting logs."})}}}},4694:(e,t,n)=>{const a=n(792);e.exports={createOrUpdateProperty:async(e,t)=>{try{const n=e.body,s=await a.createOrUpdateProperty(n);t.status(200).json({message:"Application properties processed successfully.",data:s})}catch(e){t.status(500).json({message:e.message})}},createOrUpdateBulkProperties:async(e,t)=>{try{const n=e.body,s=await a.createOrUpdateBulkProperties(n);t.status(200).json({message:"Application properties processed successfully.",data:s})}catch(e){t.status(500).json({message:"Error while creating/updating application properties.",error:e.message})}},getAllProperties:async(e,t)=>{try{const e=await a.getAllProperties();t.status(200).json(e)}catch(e){t.status(500).json({message:e.message})}},getPropertyById:async(e,t)=>{try{const{id:n}=e.params,s=await a.getPropertyById(n);if(!s)return t.status(404).json({message:"Property not found"});t.status(200).json(s)}catch(e){t.status(500).json({message:e.message})}},deleteProperty:async(e,t)=>{try{const{id:n}=e.params,s=await a.deleteProperty(n);t.status(200).json(s)}catch(e){t.status(500).json({message:e.message})}}}},6271:e=>{e.exports={medicalLaunchCodeTemplate:e=>`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          /* Universal Styles */\n          body {\n              font-family: Arial, sans-serif;\n              background-color: #f4f4f9;\n              margin: 0;\n              padding: 0;\n              color: #333;\n              line-height: 1.6;\n          }\n          .container {\n              max-width: 600px;\n              margin: 40px auto;\n              padding: 20px;\n              background-color: #fff;\n              border-radius: 8px;\n              box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n              border: 1px solid #ddd;\n          }\n          .header {\n              text-align: center;\n              padding: 20px;\n          }\n          .header img {\n              width: 50px;\n          }\n          .header h2 {\n              font-size: 24px;\n              margin: 10px 0;\n              color: #007bff;\n          }\n          .content {\n              text-align: center;\n              padding: 20px;\n              font-size: 16px;\n              color: #555;\n          }\n          .content p {\n              margin-bottom: 15px;\n          }\n          .code {\n              font-size: 32px;\n              font-weight: bold;\n              background-color: #f1f1f1;\n              padding: 10px 20px;\n              color: #007bff;\n              border-radius: 4px;\n              display: inline-block;\n              letter-spacing: 2px;\n              margin: 20px 0;\n          }\n          .btn {\n              background-color: #28a745;\n              color: white;\n              padding: 10px 20px;\n              font-size: 16px;\n              border-radius: 4px;\n              text-decoration: none;\n              display: inline-block;\n              margin-top: 20px;\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: #888;\n              padding: 20px 0;\n              border-top: 1px solid #eee;\n          }\n          /* Responsive Styles */\n          @media (max-width: 600px) {\n              .container {\n                  width: 95%;\n                  margin: 20px auto;\n              }\n              .content {\n                  padding: 15px;\n              }\n          }\n      </style>\n  </head>\n  <body>\n      <div class="container">\n          <div class="header">\n              <img src="https://res.cloudinary.com/dhbkxhxsy/image/upload/v1735644524/fkw33za6df1tejmc9zxy.jpg" alt="Medical Service Logo">\n              <h2>Welcome to [Medical Service Name]!</h2>\n          </div>\n          <div class="content">\n              <p>To complete your registration, please enter the code below:</p>\n              <div class="code">${e.launchCode}</div>\n              <a href="${e.verificationUrl}" class="btn">Complete Registration</a>\n              <p>If you didn’t request this, you can ignore this email.</p>\n          </div>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Medical Service Name]. All rights reserved.</p>\n              <p>[Medical Service Name], 123 Medical St, Health City, HC 12345</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,verificationTemplate:e=>`\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            background-color: #f9f9f9;\n            margin: 0;\n            padding: 0;\n            line-height: 1.6;\n            color: #333;\n        }\n        .container {\n            max-width: 600px;\n            margin: 40px auto;\n            padding: 20px;\n            background-color: #fff;\n            border-radius: 8px;\n            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);\n            border: 1px solid #ddd;\n        }\n        .header {\n            background-color: #4CAF50;\n            color: white;\n            padding: 15px;\n            text-align: center;\n            border-radius: 8px 8px 0 0;\n        }\n        .header h2 {\n            margin: 0;\n            font-size: 24px;\n        }\n        .content {\n            padding: 20px;\n            color: #555;\n            font-size: 16px;\n        }\n        .footer {\n            text-align: center;\n            font-size: 12px;\n            color: #888;\n            padding: 20px 0;\n            border-top: 1px solid #eee;\n        }\n    </style>\n</head>\n<body>\n    <div class="container">\n        <div class="header">\n            <h2>Email Verification Successful</h2>\n        </div>\n        <div class="content">\n            <p>Hi ${e.userName},</p>\n            <p>Your email has been successfully verified! You can now log in to your account and enjoy our services.</p>\n            <p>If you have any questions or need assistance, feel free to reach out to us.</p>\n        </div>\n        <div class="footer">\n            <p>&copy; ${(new Date).getFullYear()} [Your App Name]. All rights reserved.</p>\n        </div>\n    </div>\n</body>\n</html>\n`,registrationTemplate:e=>`\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <style>\n            /* Universal styles */\n            body {\n                font-family: Arial, sans-serif;\n                background-color: #f9f9f9;\n                margin: 0;\n                padding: 0;\n                line-height: 1.6;\n                color: #333;\n            }\n            .container {\n                max-width: 600px;\n                margin: 40px auto;\n                padding: 20px;\n                background-color: #fff;\n                border-radius: 8px;\n                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);\n                border: 1px solid #ddd;\n            }\n            .header {\n                background-color: #4CAF50;\n                color: white;\n                padding: 15px;\n                text-align: center;\n                border-radius: 8px 8px 0 0;\n            }\n            .header h2 {\n                margin: 0;\n                font-size: 24px;\n            }\n            .content {\n                padding: 20px;\n                color: #555;\n                font-size: 16px;\n            }\n            .content p {\n                margin-bottom: 20px;\n            }\n            .details {\n                margin: 10px 0;\n                padding: 10px;\n                border: 1px solid #ddd;\n                border-radius: 5px;\n                background-color: #f2f2f2;\n            }\n            .cta-button {\n                display: inline-block;\n                background-color: #4CAF50;\n                color: white;\n                padding: 12px 20px;\n                font-size: 16px;\n                text-decoration: none;\n                border-radius: 5px;\n                margin-top: 10px;\n                transition: background-color 0.3s ease;\n            }\n            .cta-button:hover {\n                background-color: #45a049;\n            }\n            .footer {\n                text-align: center;\n                font-size: 12px;\n                color: #888;\n                padding: 20px 0;\n                border-top: 1px solid #eee;\n            }\n            /* Responsive styles */\n            @media (max-width: 600px) {\n                .container {\n                    width: 95%;\n                    margin: 20px auto;\n                }\n                .content {\n                    padding: 10px;\n                }\n            }\n            /* Hidden preheader for inbox preview */\n            .preheader {\n                display: none;\n                visibility: hidden;\n                opacity: 0;\n                color: transparent;\n                height: 0;\n                width: 0;\n            }\n        </style>\n    </head>\n    <body>\n        <span class="preheader">Verify your email for [Your App Name], ${e.userName}.</span>\n        <div class="container">\n            <div class="header">\n                <h2>Welcome to [Your App Name]</h2>\n            </div>\n            <div class="content">\n                <p>Hi ${e.userName},</p>\n                <p>Thank you for registering with us at [Your App Name]. Please review your registration details:</p>\n                <div class="details">\n                    <p><strong>Email:</strong> ${e.userEmail}</p>\n                    <p><strong>Phone Number:</strong> ${e.userPhone}</p>\n                    <p><strong>PAN Number:</strong> ${e.userPAN}</p>\n                    <p><strong>Aadhar Number:</strong> ${e.userAadhar}</p>\n                    <p><strong>Address:</strong> ${e.userAddress}</p>\n                </div>\n                <p>To complete your registration, please verify your email address by clicking the button below:</p>\n                <a href="${e.verificationLink}" class="cta-button" target="_blank">Verify Email</a>\n                <p>If you did not create this account, no further action is required. Feel free to reach out if you have any questions.</p>\n            </div>\n            <div class="footer">\n                <p>&copy; ${(new Date).getFullYear()} [Your App Name]. All rights reserved.</p>\n            </div>\n        </div>\n    </body>\n    </html>\n`,otpTemplate:e=>`\n  <!DOCTYPE html>\n  <html>\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          /* Your existing styles */\n      </style>\n  </head>\n  <body>\n      <div class="container">\n          <div class="header">\n              <h2>Your OTP Code</h2>\n          </div>\n          <div class="content">\n              <p>Hi ${e.userName},</p>\n              <p>Your OTP code is: <strong>${e.otp}</strong></p>\n              <p>This code is valid for a limited time. If you did not request this, please ignore this email.</p>\n          </div>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Your App Name]. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,sendResetPasswordTemplate:e=>`\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <style>\n        /* Universal Styles */\n        body {\n            font-family: Arial, sans-serif;\n            background-color: #f4f4f9;\n            margin: 0;\n            padding: 0;\n            color: #333;\n            line-height: 1.6;\n        }\n        .container {\n            max-width: 600px;\n            margin: 40px auto;\n            padding: 20px;\n            background-color: #fff;\n            border-radius: 8px;\n            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n            border: 1px solid #ddd;\n        }\n        .header {\n            text-align: center;\n            padding: 20px;\n        }\n        .header img {\n            width: 50px;\n        }\n        .header h2 {\n            font-size: 24px;\n            margin: 10px 0;\n            color: #dc3545;\n        }\n        .content {\n            text-align: center;\n            padding: 20px;\n            font-size: 16px;\n            color: #555;\n        }\n        .content p {\n            margin-bottom: 15px;\n        }\n        .code {\n            font-size: 32px;\n            font-weight: bold;\n            background-color: #f1f1f1;\n            padding: 10px 20px;\n            color: #dc3545;\n            border-radius: 4px;\n            display: inline-block;\n            letter-spacing: 2px;\n            margin: 20px 0;\n        }\n        .btn {\n            background-color: #28a745;\n            color: white;\n            padding: 10px 20px;\n            font-size: 16px;\n            border-radius: 4px;\n            text-decoration: none;\n            display: inline-block;\n            margin-top: 20px;\n        }\n        .footer {\n            text-align: center;\n            font-size: 12px;\n            color: #888;\n            padding: 20px 0;\n            border-top: 1px solid #eee;\n        }\n        /* Responsive Styles */\n        @media (max-width: 600px) {\n            .container {\n                width: 95%;\n                margin: 20px auto;\n            }\n            .content {\n                padding: 15px;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class="container">\n        <div class="header">\n            <img src="https://res.cloudinary.com/dhbkxhxsy/image/upload/v1735644524/fkw33za6df1tejmc9zxy.jpg" alt="Service Logo">\n            <h2>Password Reset Request</h2>\n        </div>\n        <div class="content">\n            <p>Hello ${e.userName},</p>\n            <p>You recently requested to reset your password. Use the code below to complete the process:</p>\n            <div class="code">${e.launchCode}</div>\n            <a href="${e.resetLink}" class="btn">Reset Password</a>\n            <p>If you didn’t request this, please ignore this email.</p>\n        </div>\n        <div class="footer">\n            <p>&copy; ${(new Date).getFullYear()} Your Service Name. All rights reserved.</p>\n            <p>Your Service Name, 123 Service St, City, Country</p>\n        </div>\n    </div>\n</body>\n</html>\n`,passwordChangeTemplate:e=>`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          /* Universal Styles */\n          body {\n              font-family: 'Arial', sans-serif;\n              background-color: #f4f4f9;\n              margin: 0;\n              padding: 0;\n              color: #333;\n              line-height: 1.6;\n          }\n          .container {\n              max-width: 600px;\n              margin: 40px auto;\n              padding: 20px;\n              background-color: #fff;\n              border-radius: 10px;\n              box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);\n              border: 1px solid #ddd;\n          }\n          .header {\n              background-color: #4CAF50;\n              color: white;\n              padding: 20px;\n              text-align: center;\n              border-radius: 10px 10px 0 0;\n          }\n          .header h2 {\n              margin: 0;\n              font-size: 26px;\n              font-weight: bold;\n          }\n          .content {\n              padding: 20px;\n              font-size: 16px;\n              color: #555;\n              line-height: 1.5;\n          }\n          .content p {\n              margin-bottom: 15px;\n          }\n          .alert {\n              color: #d9534f;\n              font-weight: bold;\n              background-color: #ffeef0;\n              padding: 10px;\n              border-left: 4px solid #d9534f;\n              border-radius: 4px;\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: #888;\n              padding: 20px 0;\n              border-top: 1px solid #eee;\n          }\n          /* Responsive Styles */\n          @media (max-width: 600px) {\n              .container {\n                  width: 95%;\n                  margin: 20px auto;\n              }\n              .content {\n                  padding: 15px;\n              }\n          }\n          /* Hidden Preheader */\n          .preheader {\n              display: none;\n              visibility: hidden;\n              opacity: 0;\n              color: transparent;\n              height: 0;\n              width: 0;\n          }\n      </style>\n  </head>\n  <body>\n      <span class="preheader">Your password has been changed, ${e.userName}. If this wasn't you, please take action immediately.</span>\n      <div class="container">\n          <div class="header">\n              <h2>Password Changed Successfully</h2>\n          </div>\n          <div class="content">\n              <p>Hi ${e.userName},</p>\n              <p>Your password has been successfully updated. If you initiated this request, no further action is required.</p>\n              <div class="alert">\n                  If you did not make this change, please contact our support team immediately to secure your account.\n              </div>\n              <p><strong>User ID:</strong> ${e.userId}</p>\n          </div>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Your App Name]. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,documentUploadTemplate:e=>`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          :root {\n              --primary-color: #4CAF50;\n              --secondary-color: #f7f7f7;\n              --text-color: #333;\n              --footer-color: #888;\n              --border-color: #ddd;\n          }\n          body {\n              font-family: Arial, sans-serif;\n              background-color: var(--secondary-color);\n              margin: 0;\n              padding: 20px;\n              color: var(--text-color);\n          }\n          .container {\n              max-width: 600px;\n              margin: 40px auto;\n              background-color: #fff;\n              padding: 20px;\n              border-radius: 8px;\n              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n              border: 1px solid var(--border-color);\n          }\n          h2 {\n              color: var(--primary-color);\n              font-size: 24px;\n              text-align: center;\n              margin-bottom: 20px;\n          }\n          p {\n              font-size: 16px;\n              line-height: 1.6;\n              margin-bottom: 20px;\n          }\n          a {\n              color: var(--primary-color);\n              text-decoration: none;\n              font-weight: bold;\n          }\n          a:hover {\n              text-decoration: underline;\n          }\n          .button {\n              display: inline-block;\n              padding: 10px 20px;\n              background-color: var(--primary-color);\n              color: white;\n              border-radius: 5px;\n              text-decoration: none;\n              font-weight: bold;\n              text-align: center;\n              margin: 20px 0;\n          }\n          .button:hover {\n              background-color: #388E3C;\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: var(--footer-color);\n              padding: 20px 0;\n              border-top: 1px solid var(--border-color);\n              margin-top: 40px;\n          }\n          @media screen and (max-width: 600px) {\n              .container {\n                  padding: 10px;\n              }\n              h2 {\n                  font-size: 20px;\n              }\n              p {\n                  font-size: 14px;\n              }\n          }\n      </style>\n  </head>\n  <body>\n      <div class="container">\n          <h2>Document Upload Request</h2>\n          <p>Hi ${e.userName},</p>\n          <p>We request you to upload your files (${e.documentTypes}) via the link below.</p>\n          <p><strong>Accepted formats:</strong> ${e.documentTypes}</p>\n          <a href="${e.uploadLink}" class="button">Upload Your Documents</a>\n          <p>If you have any questions, feel free to reach out.</p>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Your Company Name]. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,sendResetEmail:e=>{e.token},performanceTrackingTemplate:e=>`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          /* CSS Variables for easy customization */\n          :root {\n              --primary-color: #4CAF50;\n              --header-bg: #f4f4f4;\n              --footer-color: #888;\n              --border-color: #ddd;\n              --text-color: #333;\n              --highlight-color: #f9f9f9;\n          }\n          body {\n              font-family: Arial, sans-serif;\n              background-color: #f7f7f7;\n              margin: 0;\n              padding: 0;\n              color: var(--text-color);\n              line-height: 1.6;\n          }\n          .container {\n              max-width: 600px;\n              margin: 40px auto;\n              padding: 20px;\n              background-color: #fff;\n              border-radius: 8px;\n              box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n              border: 1px solid var(--border-color);\n          }\n          .header {\n              background-color: var(--header-bg);\n              color: var(--primary-color);\n              padding: 15px;\n              text-align: center;\n              border-radius: 8px 8px 0 0;\n          }\n          .header h2 {\n              margin: 0;\n              font-size: 24px;\n          }\n          .content {\n              padding: 20px;\n              font-size: 16px;\n              color: var(--text-color);\n          }\n          .content p {\n              margin-bottom: 20px;\n          }\n          table {\n              width: 100%;\n              border-collapse: collapse;\n              margin: 20px 0;\n          }\n          th, td {\n              border: 1px solid var(--border-color);\n              padding: 10px;\n              text-align: left;\n          }\n          th {\n              background-color: var(--primary-color);\n              color: white;\n          }\n          tr:nth-child(even) {\n              background-color: var(--highlight-color);\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: var(--footer-color);\n              padding: 20px 0;\n              border-top: 1px solid #eee;\n          }\n          /* Responsive Styles */\n          @media (max-width: 600px) {\n              .container {\n                  width: 95%;\n                  margin: 20px auto;\n              }\n              .content {\n                  padding: 10px;\n              }\n          }\n          /* Hidden Preheader */\n          .preheader {\n              display: none;\n              visibility: hidden;\n              opacity: 0;\n              color: transparent;\n              height: 0;\n              width: 0;\n          }\n      </style>\n  </head>\n  <body>\n      <span class="preheader">Your performance tracking report is ready for review.</span>\n      <div class="container">\n          <div class="header">\n              <h2>Performance Tracking Report</h2>\n          </div>\n          <div class="content">\n              <p>Hi [Recipient's Name],</p>\n              <p>Here is the performance report for [Date/Period]:</p>\n              <table>\n                  <tr>\n                      <th>Action</th>\n                      <th>Duration</th>\n                  </tr>\n                  ${e.map((e=>`\n                  <tr>\n                      <td>${e.Action}</td>\n                      <td>${e.Duration}</td>\n                  </tr>`)).join("")}\n              </table>\n              <p>If you have any questions about this report, please contact our support team.</p>\n          </div>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Your App Name]. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,systemLogsTemplate:e=>`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          /* CSS Variables for easy customization */\n          :root {\n              --primary-color: #4CAF50;\n              --header-bg: #f4f4f4;\n              --footer-color: #888;\n              --border-color: #ddd;\n              --text-color: #333;\n              --highlight-color: #f9f9f9;\n          }\n          body {\n              font-family: Arial, sans-serif;\n              background-color: #f7f7f7;\n              margin: 0;\n              padding: 0;\n              color: var(--text-color);\n              line-height: 1.6;\n          }\n          .container {\n              max-width: 600px;\n              margin: 40px auto;\n              padding: 20px;\n              background-color: #fff;\n              border-radius: 8px;\n              box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n              border: 1px solid var(--border-color);\n          }\n          .header {\n              background-color: var(--header-bg);\n              color: var(--primary-color);\n              padding: 15px;\n              text-align: center;\n              border-radius: 8px 8px 0 0;\n          }\n          .header h2 {\n              margin: 0;\n              font-size: 24px;\n          }\n          .content {\n              padding: 20px;\n              font-size: 16px;\n              color: var(--text-color);\n          }\n          .content p {\n              margin-bottom: 20px;\n          }\n          table {\n              width: 100%;\n              border-collapse: collapse;\n              margin: 20px 0;\n          }\n          th, td {\n              border: 1px solid var(--border-color);\n              padding: 10px;\n              text-align: left;\n          }\n          th {\n              background-color: var(--primary-color);\n              color: white;\n          }\n          tr:nth-child(even) {\n              background-color: var(--highlight-color);\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: var(--footer-color);\n              padding: 20px 0;\n              border-top: 1px solid #eee;\n          }\n          /* Responsive Styles */\n          @media (max-width: 600px) {\n              .container {\n                  width: 95%;\n                  margin: 20px auto;\n              }\n              .content {\n                  padding: 10px;\n              }\n          }\n          /* Hidden Preheader */\n          .preheader {\n              display: none;\n              visibility: hidden;\n              opacity: 0;\n              color: transparent;\n              height: 0;\n              width: 0;\n          }\n      </style>\n  </head>\n  <body>\n      <span class="preheader">Your system logs report is ready for review.</span>\n      <div class="container">\n          <div class="header">\n              <h2>System Logs Report</h2>\n          </div>\n          <div class="content">\n              <p>Hi [Recipient's Name],</p>\n              <p>Here are the system logs for [Date/Period]:</p>\n              <table>\n                  <tr>\n                      <th>Timestamp</th>\n                      <th>Log Level</th>\n                      <th>Message</th>\n                  </tr>\n                  ${e.map((e=>`\n                  <tr>\n                      <td>${e.timestamp}</td>\n                      <td>${e.level}</td>\n                      <td>${e.message}</td>\n                  </tr>`)).join("")}\n              </table>\n              <p>For any questions or further details, please reach out to support.</p>\n          </div>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Your App Name]. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,notificationTemplate:e=>`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          /* CSS Variables for easy customization */\n          :root {\n              --primary-color: #4CAF50;\n              --header-bg: #f4f4f4;\n              --footer-color: #888;\n              --border-color: #ddd;\n              --text-color: #333;\n              --highlight-color: #f9f9f9;\n          }\n          body {\n              font-family: Arial, sans-serif;\n              background-color: #f7f7f7;\n              margin: 0;\n              padding: 0;\n              color: var(--text-color);\n              line-height: 1.6;\n          }\n          .container {\n              max-width: 600px;\n              margin: 40px auto;\n              padding: 20px;\n              background-color: #fff;\n              border-radius: 8px;\n              box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n              border: 1px solid var(--border-color);\n          }\n          .header {\n              background-color: var(--header-bg);\n              color: var(--primary-color);\n              padding: 15px;\n              text-align: center;\n              border-radius: 8px 8px 0 0;\n          }\n          .header h2 {\n              margin: 0;\n              font-size: 24px;\n          }\n          .content {\n              padding: 20px;\n              font-size: 16px;\n              color: var(--text-color);\n          }\n          .content p {\n              margin-bottom: 20px;\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: var(--footer-color);\n              padding: 20px 0;\n              border-top: 1px solid #eee;\n          }\n          /* Responsive Styles */\n          @media (max-width: 600px) {\n              .container {\n                  width: 95%;\n                  margin: 20px auto;\n              }\n              .content {\n                  padding: 10px;\n              }\n          }\n          /* Hidden Preheader */\n          .preheader {\n              display: none;\n              visibility: hidden;\n              opacity: 0;\n              color: transparent;\n              height: 0;\n              width: 0;\n          }\n      </style>\n  </head>\n  <body>\n      <span class="preheader">You have a new notification from [Your App Name].</span>\n      <div class="container">\n          <div class="header">\n              <h2>${e.title}</h2>\n          </div>\n          <div class="content">\n              <p>Hi [Recipient's Name],</p>\n              <p>${e.content}</p>\n              <p>If you have any questions, please contact our support team.</p>\n          </div>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Your App Name]. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,welcomeTemplate:e=>`\n  <!DOCTYPE html>\n  <html>\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          /* Universal styles */\n          body {\n              font-family: Arial, sans-serif;\n              line-height: 1.6;\n              color: #333;\n              margin: 0;\n              padding: 0;\n              background-color: #f4f4f4;\n          }\n          .container {\n              max-width: 600px;\n              margin: 20px auto;\n              padding: 20px;\n              background-color: #fff;\n              border-radius: 10px;\n              box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n              border: 1px solid #ddd;\n          }\n          .header {\n              background-color: #4CAF50;\n              color: white;\n              text-align: center;\n              padding: 20px;\n              border-radius: 10px 10px 0 0;\n          }\n          .content {\n              padding: 20px;\n              font-size: 16px;\n              color: #555;\n          }\n          .content p {\n              margin: 1em 0;\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: #888;\n              margin-top: 20px;\n              padding: 10px 0;\n              border-top: 1px solid #eee;\n          }\n          .cta-button {\n              display: inline-block;\n              background-color: #4CAF50;\n              color: white;\n              padding: 10px 20px;\n              text-align: center;\n              text-decoration: none;\n              font-size: 16px;\n              margin-top: 20px;\n              border-radius: 5px;\n          }\n          .cta-button:hover {\n              background-color: #45a049;\n          }\n          /* Responsive styles */\n          @media (max-width: 600px) {\n              .container {\n                  width: 95%;\n              }\n              .content {\n                  padding: 10px;\n              }\n          }\n          /* Hidden preview text for inbox summary */\n          .preheader {\n              display: none;\n              visibility: hidden;\n              opacity: 0;\n              color: transparent;\n              height: 0;\n              width: 0;\n          }\n      </style>\n  </head>\n  <body>\n      <span class="preheader">Welcome to [Your App Name], ${e.name}! We are thrilled to have you with us.</span>\n      <div class="container">\n          <div class="header">\n              <h2>Welcome to [Your App Name]!</h2>\n          </div>\n          <div class="content">\n              <p>Hi ${e.name},</p>\n              <p>We are thrilled to have you join our community! At [Your App Name], we are committed to providing you with the best experience possible.</p>\n              <p>You can start exploring right away and make the most of our services.</p>\n              <p>To get started, click the button below:</p>\n              <a href="[Your App URL]" class="cta-button">Get Started</a>\n              <p>If you have any questions, feel free to reach out to our support team. We're here to help!</p>\n              <p>Best regards,<br/>The [Your App Name] Team</p>\n          </div>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Your App Name]. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,eventInvitationTemplate:e=>`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          :root {\n              --primary-color: #3F51B5;\n              --header-bg: #f4f4f4;\n              --footer-color: #888;\n              --border-color: #ddd;\n              --text-color: #333;\n              --link-color: #1E88E5;\n              --button-bg: #3F51B5;\n              --button-color: #fff;\n          }\n          body {\n              font-family: Arial, sans-serif;\n              background-color: #f7f7f7;\n              margin: 0;\n              padding: 0;\n              color: var(--text-color);\n              line-height: 1.6;\n          }\n          .container {\n              max-width: 600px;\n              margin: 40px auto;\n              padding: 20px;\n              background-color: #fff;\n              border-radius: 8px;\n              box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n              border: 1px solid var(--border-color);\n          }\n          .header {\n              background-color: var(--header-bg);\n              color: var(--primary-color);\n              padding: 15px;\n              text-align: center;\n              border-radius: 8px 8px 0 0;\n          }\n          .content {\n              padding: 20px;\n          }\n          .content p {\n              margin: 10px 0;\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: var(--footer-color);\n              padding: 20px 0;\n              border-top: 1px solid #eee;\n          }\n          .cta-button {\n              display: inline-block;\n              margin-top: 20px;\n              padding: 10px 20px;\n              background-color: var(--button-bg);\n              color: var(--button-color);\n              text-decoration: none;\n              border-radius: 5px;\n              font-weight: bold;\n              transition: background-color 0.3s;\n          }\n          .cta-button:hover {\n              background-color: darken(var(--button-bg), 10%);\n          }\n          @media (max-width: 600px) {\n              .container {\n                  padding: 15px;\n              }\n              .header h2 {\n                  font-size: 1.5em;\n              }\n              .cta-button {\n                  padding: 8px 15px;\n              }\n          }\n      </style>\n  </head>\n  <body>\n      <div class="container">\n          <div class="header">\n              <h2>You're Invited to ${e.eventName}</h2>\n          </div>\n          <div class="content">\n              <p>Hi [Recipient's Name],</p>\n              <p>We are excited to invite you to our upcoming event:</p>\n              <p><strong>Date:</strong> ${e.eventDate}</p>\n              <p><strong>Join us here:</strong> <a href="${e.eventLink}" target="_blank" style="color: var(--link-color); text-decoration: underline;">${e.eventLink}</a></p>\n              <p>We hope to see you there!</p>\n              <a href="${e.eventLink}" class="cta-button" target="_blank">RSVP Now</a>\n          </div>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Your App Name]. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,downloadProjectTemplate:e=>`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          :root {\n              --primary-color: #3F51B5;\n              --button-color: #4CAF50;\n              --secondary-color: #f7f7f7;\n              --text-color: #333;\n              --footer-color: #888;\n              --border-color: #ddd;\n          }\n          body {\n              font-family: Arial, sans-serif;\n              background-color: var(--secondary-color);\n              margin: 0;\n              padding: 20px;\n              color: var(--text-color);\n          }\n          .container {\n              max-width: 600px;\n              margin: 40px auto;\n              background-color: #fff;\n              padding: 20px;\n              border-radius: 8px;\n              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n              border: 1px solid var(--border-color);\n          }\n          h2 {\n              color: var(--primary-color);\n              font-size: 24px;\n              margin-bottom: 20px;\n              text-align: center;\n          }\n          p {\n              font-size: 16px;\n              line-height: 1.6;\n              margin-bottom: 20px;\n          }\n          .download-btn {\n              display: block;\n              width: 100%;\n              text-align: center;\n              background-color: var(--button-color);\n              color: white;\n              padding: 12px 0;\n              font-size: 16px;\n              text-decoration: none;\n              border-radius: 5px;\n              margin: 20px 0;\n              transition: background-color 0.3s;\n          }\n          .download-btn:hover {\n              background-color: #388E3C;\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: var(--footer-color);\n              padding: 20px 0;\n              border-top: 1px solid var(--border-color);\n              margin-top: 40px;\n          }\n          @media screen and (max-width: 600px) {\n              .container {\n                  padding: 10px;\n              }\n              h2 {\n                  font-size: 20px;\n              }\n              p {\n                  font-size: 14px;\n              }\n          }\n      </style>\n  </head>\n  <body>\n      <div class="container">\n          <h2>Hi ${e.userName},</h2>\n          <p>Your project "<strong>${e.projectName}</strong>" is now ready for download! Click the button below to download your project files.</p>\n          <a href="${e.downloadLink}" class="download-btn">Download Project</a>\n          <p>If you encounter any issues with the download, feel free to reach out to our support team for assistance.</p>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Your App Name]. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,eventCancellationTemplate:e=>`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          :root {\n              --primary-color: #D32F2F;\n              --secondary-color: #f7f7f7;\n              --text-color: #333;\n              --footer-color: #888;\n              --border-color: #ddd;\n          }\n          body {\n              font-family: Arial, sans-serif;\n              background-color: var(--secondary-color);\n              margin: 0;\n              padding: 20px;\n              color: var(--text-color);\n          }\n          .container {\n              max-width: 600px;\n              margin: 40px auto;\n              background-color: #fff;\n              padding: 20px;\n              border-radius: 8px;\n              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n              border: 1px solid var(--border-color);\n          }\n          h2 {\n              color: var(--primary-color);\n              font-size: 24px;\n              margin-bottom: 20px;\n              text-align: center;\n          }\n          p {\n              font-size: 16px;\n              line-height: 1.6;\n              margin-bottom: 20px;\n              text-align: center;\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: var(--footer-color);\n              padding: 20px 0;\n              border-top: 1px solid var(--border-color);\n              margin-top: 40px;\n          }\n          @media screen and (max-width: 600px) {\n              .container {\n                  padding: 10px;\n              }\n              h2 {\n                  font-size: 20px;\n              }\n              p {\n                  font-size: 14px;\n              }\n          }\n      </style>\n  </head>\n  <body>\n      <div class="container">\n          <h2>Important Notice: Cancellation of ${e.eventName}</h2>\n          <p>We regret to inform you that due to unforeseen circumstances, the event "<strong>${e.eventName}</strong>" has been cancelled.</p>\n          <p>We sincerely apologize for any inconvenience this may cause. If you have any questions or need further assistance, please don't hesitate to contact our support team.</p>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Your App Name]. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,termsAndConditionsTemplate:e=>`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          :root {\n              --primary-color: #3F51B5;\n              --secondary-color: #f7f7f7;\n              --text-color: #333;\n              --footer-color: #888;\n              --border-color: #ddd;\n          }\n          body {\n              font-family: Arial, sans-serif;\n              background-color: var(--secondary-color);\n              margin: 0;\n              padding: 20px;\n              color: var(--text-color);\n          }\n          .container {\n              max-width: 600px;\n              margin: 40px auto;\n              background-color: #fff;\n              padding: 20px;\n              border-radius: 8px;\n              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n              border: 1px solid var(--border-color);\n          }\n          h2 {\n              color: var(--primary-color);\n              font-size: 24px;\n              text-align: center;\n              margin-bottom: 20px;\n          }\n          p {\n              font-size: 16px;\n              line-height: 1.6;\n              margin-bottom: 20px;\n          }\n          a {\n              color: var(--primary-color);\n              text-decoration: none;\n              font-weight: bold;\n          }\n          a:hover {\n              text-decoration: underline;\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: var(--footer-color);\n              padding: 20px 0;\n              border-top: 1px solid var(--border-color);\n              margin-top: 40px;\n          }\n          @media screen and (max-width: 600px) {\n              .container {\n                  padding: 10px;\n              }\n              h2 {\n                  font-size: 20px;\n              }\n              p {\n                  font-size: 14px;\n              }\n          }\n      </style>\n  </head>\n  <body>\n      <div class="container">\n          <h2>Terms and Conditions Update</h2>\n          <p>Dear ${e.userName},</p>\n          <p>We have updated our Terms and Conditions at ${e.companyName}. Please take a moment to review the new terms by clicking the link below:</p>\n          <p><a href="${e.termsLink}" target="_blank">Read Terms and Conditions</a></p>\n          <p>By continuing to use our services, you agree to the updated terms.</p>\n          <p>If you have any questions or concerns, feel free to contact us for clarification.</p>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} ${e.companyName}. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`,sendLocationTemplate:e=>`\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <style>\n          :root {\n              --primary-color: #3F51B5;\n              --secondary-color: #f7f7f7;\n              --text-color: #333;\n              --footer-color: #888;\n              --border-color: #ddd;\n          }\n          body {\n              font-family: Arial, sans-serif;\n              background-color: var(--secondary-color);\n              margin: 0;\n              padding: 20px;\n              color: var(--text-color);\n          }\n          .container {\n              max-width: 600px;\n              margin: 40px auto;\n              background-color: #fff;\n              padding: 20px;\n              border-radius: 8px;\n              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n              border: 1px solid var(--border-color);\n          }\n          h2 {\n              color: var(--primary-color);\n              font-size: 24px;\n              text-align: center;\n              margin-bottom: 20px;\n          }\n          p {\n              font-size: 16px;\n              line-height: 1.6;\n              margin-bottom: 20px;\n          }\n          a {\n              color: var(--primary-color);\n              text-decoration: none;\n              font-weight: bold;\n          }\n          a:hover {\n              text-decoration: underline;\n          }\n          .footer {\n              text-align: center;\n              font-size: 12px;\n              color: var(--footer-color);\n              padding: 20px 0;\n              border-top: 1px solid var(--border-color);\n              margin-top: 40px;\n          }\n          @media screen and (max-width: 600px) {\n              .container {\n                  padding: 10px;\n              }\n              h2 {\n                  font-size: 20px;\n              }\n              p {\n                  font-size: 14px;\n              }\n          }\n      </style>\n  </head>\n  <body>\n      <div class="container">\n          <h2>${e.locationName}</h2>\n          <p>Hi ${e.userName},</p>\n          <p>We are pleased to share the location details for the upcoming event/meeting at ${e.locationName}.</p>\n          <p><strong>Address:</strong> ${e.locationAddress}</p>\n          <p><strong>Find us on the map:</strong> <a href="${e.locationLink}" target="_blank">View Location</a></p>\n          <p>We look forward to seeing you there!</p>\n          <div class="footer">\n              <p>&copy; ${(new Date).getFullYear()} [Your Company Name]. All rights reserved.</p>\n          </div>\n      </div>\n  </body>\n  </html>\n`}},2090:e=>{e.exports={encodeToBase64:e=>Buffer.from(e).toString("base64"),decodeFromBase64:e=>Buffer.from(e,"base64").toString("utf-8"),encodeBufferToBase64:e=>e.toString("base64"),decodeBase64ToBuffer:e=>Buffer.from(e,"base64"),encodeJsonToBase64:e=>{const t=JSON.stringify(e);return Buffer.from(t).toString("base64")},decodeBase64ToJson:e=>{const t=Buffer.from(e,"base64").toString("utf-8");return JSON.parse(t)}}},7639:(e,t,n)=>{const a=n(9896),s=(n(2003),n(2090));e.exports={readFile:e=>{try{return a.readFileSync(e,"utf-8")}catch(e){throw console.error(`Error reading file: ${e.message}`),e}},writeFile:(e,t)=>{try{a.writeFileSync(e,t,"utf-8"),console.log(`File successfully written to ${e}`)}catch(e){throw console.error(`Error writing file: ${e.message}`),e}},deleteFile:e=>{try{a.unlinkSync(e),console.log(`File successfully deleted: ${e}`)}catch(e){throw console.error(`Error deleting file: ${e.message}`),e}},encodeFileToBase64:e=>{try{const t=a.readFileSync(e);return s.encodeBufferToBase64(t)}catch(e){throw console.error(`Error encoding file to Base64: ${e.message}`),e}},decodeBase64ToFile:(e,t)=>{try{const n=s.decodeBase64ToBuffer(e);a.writeFileSync(t,n),console.log(`File successfully created at ${t}`)}catch(e){throw console.error(`Error decoding Base64 to file: ${e.message}`),e}},getFileStats:e=>{try{return a.statSync(e)}catch(e){throw console.error(`Error getting file stats: ${e.message}`),e}},fileExists:e=>a.existsSync(e)}},3300:(e,t,n)=>{const a=n(5486),{SALT_ROUNDS:s}=n(9167);e.exports={hashPassword:async e=>a.hash(e,s||10),comparePassword:async(e,t)=>a.compare(e,t)}},5207:(e,t,n)=>{const a=n(2446),s=a.object({property_name:a.string().max(255).required(),property_value:a.string().max(255).required(),desc:a.string().max(500).optional(),metadata:a.object().optional()}),o=a.array().items(a.object({property_name:a.string().max(255).required(),property_value:a.string().max(255).required(),desc:a.string().max(500).optional(),metadata:a.object().optional()}));e.exports={propertyValidationSchema:s,propertyBulkValidationSchema:o}},4934:(e,t,n)=>{const a=n(2446),s=a.object({usernameOrEmail:a.string().required().messages({"string.base":"Username or email must be a string.","string.empty":"Username or email is required.","any.required":"Username or email is required."}),password:a.string().min(8).max(255).required().messages({"string.base":"Password must be a string.","string.empty":"Password is required.","string.min":"Password must be at least 8 characters long.","string.max":"Password must be at most 255 characters long.","any.required":"Password is required."})}),o=a.object({oldPassword:a.string().min(8).max(255).required().messages({"string.base":"Old password must be a string.","string.empty":"Old password is required.","string.min":"Old password must be at least 8 characters long.","string.max":"Old password must be at most 255 characters long.","any.required":"Old password is required."}),newPassword:a.string().min(8).max(255).required().messages({"string.base":"New password must be a string.","string.empty":"New password is required.","string.min":"New password must be at least 8 characters long.","string.max":"New password must be at most 255 characters long.","any.required":"New password is required."})}),r=a.object({token:a.string().required().messages({"string.base":"Token must be a string.","string.empty":"Token is required.","any.required":"Token is required."}),newPassword:a.string().min(8).max(255).required().messages({"string.base":"New password must be a string.","string.empty":"New password is required.","string.min":"New password must be at least 8 characters long.","string.max":"New password must be at most 255 characters long.","any.required":"New password is required."})}),i=a.object({token:a.string().required().messages({"string.base":"Token must be a string.","string.empty":"Token is required.","any.required":"Token is required."})});e.exports={loginSchema:s,changePasswordSchema:o,resetPasswordSchema:r,refreshTokenSchema:i}},7880:(e,t,n)=>{const a=n(2446),s=a.object({title:a.string().required().messages({"string.base":"Title must be a string.","any.required":"Title is required."}),description:a.string().required().messages({"string.base":"Description must be a string.","any.required":"Description is required."}),industry:a.string().optional().allow(null,""),location:a.string().optional().allow(null,""),target_market:a.string().optional().allow(null,""),stage:a.string().valid("idea","prototype","early","growth","scale-up").default("idea"),funding_required:a.number().precision(2).optional().allow(null),funding_type:a.string().valid("seed","angel","VC","bootstrapped").optional().allow(null),compensation:a.number().precision(2).optional().allow(null),equity_share:a.number().precision(2).optional().allow(null),partnership_terms:a.string().optional().allow(null,""),terms:a.string().optional().allow(null,""),expected_launch_date:a.date().optional().allow(null),development_timeline:a.string().optional().allow(null,""),status:a.string().valid("open","closed","in-progress","completed").default("open"),visibility:a.string().valid("public","private").default("public"),pitch_video_url:a.string().uri().optional().allow(null,""),images:a.array().items(a.string().uri()).optional().allow(null),views_count:a.number().integer().default(0),applications_count:a.number().integer().default(0),last_updated:a.date().default((()=>new Date)),tags:a.array().items(a.string()).optional().allow(null),seeking:a.array().items(a.string()).optional().allow(null),posted:a.date().default((()=>new Date)),marketSize:a.string().optional().allow(null,""),traction:a.string().optional().allow(null,""),competition:a.array().items(a.string()).optional().allow(null),commitment:a.string().optional().allow(null,""),validation:a.array().items(a.string()).optional().allow(null),upvotes:a.number().integer().default(0),comments:a.number().integer().default(0)}),o=a.object({title:a.string().optional().messages({"string.base":"Title must be a string."}),description:a.string().optional().messages({"string.base":"Description must be a string."}),industry:a.string().optional().allow(null,""),location:a.string().optional().allow(null,""),target_market:a.string().optional().allow(null,""),stage:a.string().valid("idea","prototype","early","growth","scale-up").optional(),funding_required:a.number().precision(2).optional().allow(null),funding_type:a.string().valid("seed","angel","VC","bootstrapped").optional().allow(null),compensation:a.number().precision(2).optional().allow(null),equity_share:a.number().precision(2).optional().allow(null),partnership_terms:a.string().optional().allow(null,""),terms:a.string().optional().allow(null,""),expected_launch_date:a.date().optional().allow(null),development_timeline:a.string().optional().allow(null,""),status:a.string().valid("open","closed","in-progress","completed").optional(),visibility:a.string().valid("public","private").optional(),pitch_video_url:a.string().uri().optional().allow(null,""),images:a.array().items(a.string().uri()).optional().allow(null),views_count:a.number().integer().optional(),applications_count:a.number().integer().optional(),last_updated:a.date().default((()=>new Date)),tags:a.array().items(a.string()).optional().allow(null),seeking:a.array().items(a.string()).optional().allow(null),posted:a.date().optional(),marketSize:a.string().optional().allow(null,""),traction:a.string().optional().allow(null,""),competition:a.array().items(a.string()).optional().allow(null),commitment:a.string().optional().allow(null,""),validation:a.array().items(a.string()).optional().allow(null),upvotes:a.number().integer().optional(),comments:a.number().integer().optional()});e.exports={ideaValidationSchema:s,updateIdeaValidationSchema:o}},8452:(e,t,n)=>{const a=n(2446),s=a.array().items(a.object({name:a.string().max(100).required(),description:a.string().max(500).optional(),created_by:a.string().required(),updated_by:a.string().required()})).min(1),o=a.object({name:a.string().max(100).optional(),description:a.string().max(500).optional(),updated_by:a.string().required()}),r=a.object({id:a.number().integer().positive().optional(),name:a.string().max(100).optional()}),i=a.array().items(a.object({id:a.number().optional(),name:a.string().max(100).required(),description:a.string().optional(),level:a.string().max(100).default("A1"),parent_permission_id:a.number().integer().positive().allow(null),is_leaf:a.boolean().default(!1),status:a.string().valid("active","inactive").default("active"),assigned_to:a.string().optional(),valid_from:a.date().optional(),valid_until:a.date().optional(),priority:a.number().integer().optional(),department:a.string().optional(),region:a.string().optional(),resource_type:a.string().optional(),action_type:a.string().optional(),permission_group_id:a.number().integer().positive().allow(null)})).min(1),l=a.object({name:a.string().max(100).optional(),description:a.string().optional(),level:a.string().max(100).optional(),status:a.string().valid("active","inactive").optional(),priority:a.number().integer().optional(),valid_from:a.date().optional(),valid_until:a.date().optional(),parent_permission_id:a.number().integer().positive().allow(null).optional()}),d=a.object({permissionIds:a.array().items(a.number().integer().positive()).min(1).required(),roleId:a.number().integer().positive().required()});e.exports={roleCreateSchema:s,roleUpdateSchema:o,roleQuerySchema:r,permissionCreateSchema:i,permissionUpdateSchema:l,rolePermissionsAssignSchema:d}},783:(e,t,n)=>{const a=n(2446),s=a.object({userId:a.number().integer().positive().optional().messages({"number.base":"User ID must be a number","number.integer":"User ID must be an integer","number.positive":"User ID must be a positive integer"}),sourceIp:a.string().ip({version:["ipv4","ipv6"]}).optional().messages({"string.base":"Source IP must be a string","string.ip":"Source IP must be a valid IP address"}),relatedInfo:a.string().max(500).optional().messages({"string.base":"Related Info must be a string","string.max":"Related Info must be at most 500 characters long"}),logoffBy:a.string().valid("SYSTEM","USER").optional().messages({"string.base":"Logoff By must be a string","any.only":"Logoff By must be either SYSTEM or USER"}),logoffAt:a.date().optional().messages({"date.base":"Logoff At must be a valid date"}),loginAt:a.date().optional().messages({"date.base":"Login At must be a valid date"}),jwtToken:a.string().optional().messages({"string.base":"JWT Token must be a string"}),createdAt:a.date().optional().messages({"date.base":"Created At must be a valid date"})}),o=s.fork(["sourceIp","jwtToken"],(e=>e.required())),r=s,i=s.append({id:a.string().guid({version:"uuidv4"}).optional().messages({"string.base":"ID must be a string","string.guid":"ID must be a valid UUID"})});e.exports={userLogCreateSchema:o,userLogUpdateSchema:r,userLogQuerySchema:i}},1023:(e,t,n)=>{const a=n(2446),{checkExistsEmail:s,checkExistsUsername:o}=n(2350),{prefixes:r}=n(7061),i=a.object({startup_name:a.string().max(100).required(),industry:a.string().max(100).valid("Tech","Health","Finance","Education","Retail","Other").required(),number_of_employees:a.number().integer().min(1).required(),stage:a.string().valid("*-","Ideation","Validation","Early Traction","Scaling").required(),nature_of_business:a.string().valid("Product","Service","Process").required(),revenue_model:a.string().max(255).required(),unique_value_proposition:a.string().max(500).required(),pitch_deck:a.string().uri().required()}),l=a.object({username:a.string().max(50).required().external((async(e,t)=>await o(e)?t.message(`Duplicate username found. Please provide a unique username. Username - ${e}`):e)),email:a.string().email().max(100).required().external((async(e,t)=>await s(e)?t.message(`Duplicate email found. Please provide a unique email address. Email - ${e}`):e)),password:a.string().min(8).max(255).required(),first_name:a.string().max(50).required(),last_name:a.string().max(50).required(),date_of_birth:a.date().iso().optional(),phone_number:a.string().max(15).optional(),whatsapp_number:a.string().max(15).optional(),address:a.string().max(500).optional(),status:a.string().valid("active","inactive","banned").default("active"),role_id:a.number().integer().optional().default(2),user_metadata:a.object().pattern(a.string(),a.any()).optional(),founder_info:a.when("role_id",{is:1,then:i.required(),otherwise:a.forbidden()})}),d=a.object({username:a.string().max(50).optional(),email:a.string().email().max(100).optional(),password:a.string().min(8).max(255).forbidden(),first_name:a.string().max(50).optional(),last_name:a.string().max(50).optional(),date_of_birth:a.date().iso().optional(),phone_number:a.string().max(15).optional(),whatsapp_number:a.string().max(15).optional(),address:a.string().max(500).optional(),status:a.string().valid("active","inactive","banned").optional(),role_id:a.number().integer().optional(),user_metadata:a.object().pattern(a.string(),a.any()).optional(),founder_info:a.when("role_id",{is:1,then:i.required(),otherwise:a.forbidden()})}),c=a.object({name:a.string().max(100).required(),description:a.string().max(500).optional(),created_by:a.string().required(),updated_by:a.string().required()}),u=a.object({name:a.string().max(100).required()}),p=a.object({userId:a.number().integer().positive().optional(),sourceIp:a.string().ip().required(),relatedInfo:a.string().max(500).optional(),logoffBy:a.string().valid("SYSTEM","USER").optional(),logoffAt:a.date().iso().optional(),loginAt:a.date().iso().optional().default(new Date),jwtToken:a.string().required()});e.exports={userSchema:l,userUpdateSchema:d,roleSchema:c,permissionSchema:u,userLogSchema:p}},8996:(e,t,n)=>{const{verifyToken:a}=n(1199),{User:s,Role:o,Permission:r}=n(9729),i=n(5356),l=n(124),d=n(7899);e.exports=async(e,t,n)=>{const c=e.headers.authorization?.split(" ")[1],u=e.headers["x-forwarded-for"]||e.connection.remoteAddress||e.ip;if(!c)return t.status(401).json({message:"Unauthorized: No token provided"});try{const p=a(c),m=await s.findByPk(p.id,{include:[{model:o,include:{model:r,through:{attributes:[]}}}]});if(!m)return t.status(401).json({message:"Unauthorized: User not found"});const g=m.Role,y=g.Permissions?g.Permissions.map((e=>({id:e.id,name:e.name}))):[],f=l.parse(e.headers["user-agent"]),w=f.device.family||"desktop",h=`${f.os.family} - ${f.family}`,b=d.lookup(u),N=b?`${b.city}, ${b.country}`:"unknown";e.user={id:m.id,username:m.username,email:m.email,role:g.name,permissions:y},e.user=p,e.token=c,e.ip=u,e.user_info=m,e.authDetails={ip_address:u||"127.0.0.1",user_agent:h||"unknown",device_type:w||"desktop",location:N||"unknown"};const v={userId:m.id,sourceIp:u,jwtToken:c,loginAt:new Date,createdAt:new Date},x=await i.getUserLogById(m.id);x?await i.updateUserLog(x.id,{sourceIp:u,loginAt:new Date,jwtToken:c}):await i.createUserLog(v),n()}catch(e){return t.status(401).json({message:"Unauthorized: Invalid token",error:e.message})}}},3393:(e,t,n)=>{const{Op:a}=n(9031),s=n(7143);e.exports=async()=>{try{const e=new Date(Date.now()-36e5),t=await s.destroy({where:{isVerified:!1,createdAt:{[a.lt]:e}}});console.log(`Deleted ${t} unverified user(s) created more than 60 minutes ago. ${(new Date).toLocaleString()}`)}catch(e){console.error("Error deleting unverified users:",e.message)}}},8203:(e,t,n)=>{const a=n(7252),s=n(8577),o=n(2525),r=n(2703),i=n(6898),l=n(6838),d=n(3393),c=n(8998),u=a();e.exports=()=>(u.use(a.json()).use(s()).use(o()).use(a.urlencoded({extended:!0})).use(i()).use(c).use(l),r.schedule("0 * * * *",(()=>{(async()=>{await d()})()})),u)},5776:(e,t,n)=>{const a=n(8461),s=n(9896),o=n(2003),{getUploadPath:r,validateFile:i,generateFileUrl:l}=n(2061),{sizeLimits:d}=n(7061),{deleteFile:c}=n(7639),u=a.diskStorage({destination:(e,t,n)=>{if(!e.user||!e.user.id)return n(new a.MulterError("LIMIT_UNEXPECTED_FILE","Unauthorized access! User not authenticated."));const o=r(t,e.user.id);s.mkdirSync(o,{recursive:!0}),n(null,o)},filename:(e,t,n)=>{n(null,`${t.originalname.replace(/[: ]/g,"_")}`)}}),p=a({storage:u,limits:{fileSize:d.large}});e.exports=(e,t,n)=>{const s="single"===e.headers["upload-type"];(s?p.single("file"):p.array("files",10))(e,t,(d=>{if(d instanceof a.MulterError&&"LIMIT_UNEXPECTED_FILE"===d.code)return t.status(401).json({error:"Unauthorized access! User not authenticated."});if(d)return t.status(500).json({error:`Upload error: ${d.message}`});const u=s?e.file?[e.file]:[]:e.files;if(!u||0===u.length)return t.status(400).json({error:"No files uploaded."});const p=u.filter((t=>i(t,e.headers["upload-category"])));if(0===p.length)return u.forEach((e=>c(e.path))),t.status(400).json({error:"No valid files uploaded. Files have been deleted."});e.uploadedFiles=p.map(((t,n)=>({id:n+1,file:t,url:l(t.filename,o.basename(r(t)),e.user.id)}))),n()}))}},6339:e=>{e.exports=e=>async(t,n,a)=>{try{await e.validateAsync(t.body,{abortEarly:!1}),a()}catch(e){const t=e.details?.[0]?.message||"Validation failed";return console.error("Validation Error Details:",e.details),n.status(400).json({message:t})}}},1375:(e,t,n)=>{n(2446),e.exports=e=>(t,n,a)=>{const{error:s}=e.validate(t.body);if(s)return n.status(400).json({message:s.details[0].message});a()}},69:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),{User:o}=n(9729),r={id:{type:a.UUID,defaultValue:a.UUIDV4,primaryKey:!0},user_id:{type:a.INTEGER,allowNull:!0},property_name:{type:a.STRING,allowNull:!1},property_value:{type:a.STRING,allowNull:!1},desc:{type:a.STRING,allowNull:!0},metadata:{type:a.JSON,allowNull:!0,defaultValue:{}}},i=s.MAIN_DB_NAME.define("ApplicationProperties",r,{tableName:"tbl_application_properties",indexes:[{unique:!0,fields:["property_name","property_value"]}],timestamps:!0});e.exports=i},9729:(e,t,n)=>{const a=n(7143),s=n(8713),o=n(9764),r=n(4131),i=n(7938),l=n(7459),d=n(69),c=n(5346),u=n(1496),p=n(5810),m=n(4111),g=n(2672),y=n(3534),f=n(6297),w=n(2658),h=n(7921);a.belongsTo(o,{through:"UserRoles",foreignKey:"role_id"}),o.hasMany(a,{foreignKey:"role_id"}),a.hasMany(s,{foreignKey:"user_id"}),s.belongsTo(a,{foreignKey:"user_id"}),o.belongsToMany(r,{through:"RolePermissions",foreignKey:"role_id",otherKey:"permission_id"}),r.belongsToMany(o,{through:"RolePermissions",foreignKey:"permission_id",otherKey:"role_id"}),l.hasMany(a,{foreignKey:"id"}),a.belongsTo(l,{foreignKey:"id"}),l.hasMany(o,{foreignKey:"id"}),o.belongsTo(l,{foreignKey:"id"}),a.hasMany(d,{foreignKey:"id",as:"applicationProperties"}),d.belongsTo(a,{foreignKey:"id",as:"user"}),a.hasMany(c,{foreignKey:"user_id"}),c.belongsTo(a,{foreignKey:"user_id"}),l.hasMany(c,{foreignKey:"organization_id"}),c.belongsTo(l,{foreignKey:"organization_id"}),o.belongsToMany(c,{through:"RoleIdeas",foreignKey:"role_id",otherKey:"idea_id"}),c.belongsToMany(o,{through:"RoleIdeas",foreignKey:"idea_id",otherKey:"role_id"}),a.hasMany(u,{foreignKey:"user_id",as:"actions"}),u.belongsTo(a,{foreignKey:"user_id",as:"user"}),c.hasMany(u,{foreignKey:"entity_id",scope:{entity_type:"idea"},as:"ideaActions",constraints:!1}),u.belongsTo(c,{foreignKey:"entity_id",as:"idea",constraints:!1}),a.hasMany(c,{foreignKey:"user_id",as:"ideas"}),c.belongsTo(a,{foreignKey:"user_id",as:"user"}),a.belongsToMany(c,{through:"UserActions",as:"favoritedIdeas",foreignKey:"favorited_by",otherKey:"entity_id",constraints:!1}),c.belongsToMany(a,{through:"UserActions",as:"favoritedByUsers",foreignKey:"entity_id",otherKey:"favorited_by",constraints:!1}),a.hasMany(u,{foreignKey:"user_id",as:"commentsOnIdeas",scope:{action_type:"comment",entity_type:"idea"}}),u.belongsTo(a,{foreignKey:"user_id",as:"commenter"}),c.hasMany(u,{foreignKey:"entity_id",scope:{action_type:"comment",entity_type:"idea"},as:"ideaComments"}),u.belongsTo(c,{foreignKey:"entity_id",as:"commentedIdea",constraints:!1}),c.hasMany(u,{foreignKey:"entity_id",scope:{entity_type:"idea"},as:"ideaactions"}),a.hasMany(c,{foreignKey:"user_id"}),c.belongsTo(a,{foreignKey:"user_id"}),a.hasMany(y,{foreignKey:"user_id"}),y.belongsTo(a,{foreignKey:"user_id"}),c.hasMany(y,{foreignKey:"idea_id"}),y.belongsTo(c,{foreignKey:"idea_id"}),c.hasMany(p,{foreignKey:"entity_id"}),p.belongsTo(c,{foreignKey:"entity_id"}),y.hasMany(p,{foreignKey:"entity_id"}),p.belongsTo(y,{foreignKey:"entity_id"}),a.hasMany(p,{foreignKey:"user_id"}),p.belongsTo(a,{foreignKey:"user_id"}),c.hasMany(m,{foreignKey:"idea_id"}),m.belongsTo(c,{foreignKey:"idea_id"}),a.hasMany(m,{foreignKey:"user_id"}),m.belongsTo(a,{foreignKey:"user_id"}),c.hasMany(g,{foreignKey:"idea_id"}),g.belongsTo(c,{foreignKey:"idea_id"}),a.hasMany(g,{foreignKey:"user_id"}),g.belongsTo(a,{foreignKey:"user_id"}),a.hasMany(u,{foreignKey:"user_id"}),u.belongsTo(a,{foreignKey:"user_id"}),c.hasMany(u,{foreignKey:"entity_id"}),u.belongsTo(c,{foreignKey:"entity_id"}),y.hasMany(u,{foreignKey:"entity_id"}),u.belongsTo(y,{foreignKey:"entity_id"}),e.exports={User:a,UserLog:s,Role:o,Permission:r,RolePermissions:i,Organization:l,ApplicationProperties:d,Idea:c,UserActions:u,Idea:c,Like:p,Favorite:m,Share:g,Comment:y,Stats:f,UserConnection:w,Founder:h}},1166:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=n(7143),r=s.MAIN_DB_NAME.define("BlockedUser",{userId:{type:a.INTEGER,allowNull:!1,references:{model:o,key:"id"}},blockedUserId:{type:a.INTEGER,allowNull:!1,references:{model:o,key:"id"}},reason:{type:a.STRING,allowNull:!0},isPermanent:{type:a.BOOLEAN,defaultValue:!1},expiresAt:{type:a.DATE,allowNull:!0},status:{type:a.ENUM("active","expired","revoked"),defaultValue:"active"},createdAt:{type:a.DATE,defaultValue:a.NOW},updatedAt:{type:a.DATE,defaultValue:a.NOW}},{tableName:"tbl_blocked_users",timestamps:!0});e.exports=r},363:(e,t,n)=>{const a=n(7143),s=n(1166),o=n(2496),r=n(5150),i=n(8901),l=n(774),d=n(8886),c=n(1623),u=n(6691);a.hasMany(r,{foreignKey:"senderId"}),a.belongsToMany(d,{through:c}),a.hasMany(l,{foreignKey:"userId"}),a.hasMany(i,{foreignKey:"userId"}),a.belongsToMany(a,{as:"BlockedUsers",through:s,foreignKey:"userId"}),a.hasMany(o,{foreignKey:"userId"}),a.hasMany(u,{foreignKey:"userId"}),a.belongsToMany(o,{as:"BlockedMedia",through:s,foreignKey:"userId",otherKey:"mediaId"}),d.hasMany(r,{foreignKey:"roomId"}),d.belongsToMany(a,{through:c,foreignKey:"roomId"}),d.belongsToMany(o,{through:"RoomMessages",foreignKey:"roomId"}),d.belongsToMany(a,{through:c,foreignKey:"roomId",as:"roomUsers"}),a.belongsToMany(d,{through:c,foreignKey:"userId",as:"userRooms"}),d.hasMany(c,{foreignKey:"roomId"}),c.belongsTo(a,{foreignKey:"userId",as:"roomMemberUser"}),c.belongsTo(d,{foreignKey:"roomId",as:"roomMemberRoom"}),c.belongsTo(a,{foreignKey:"userId"}),c.belongsTo(d,{foreignKey:"roomId"}),l.belongsTo(a,{foreignKey:"userId"}),l.belongsTo(o,{foreignKey:"mediaId"}),r.belongsTo(a,{foreignKey:"senderId"}),r.belongsTo(d,{foreignKey:"roomId"}),r.hasMany(o,{foreignKey:"messageId"}),i.belongsTo(a,{foreignKey:"userId"}),i.belongsTo(r,{foreignKey:"messageId"}),i.belongsTo(o,{foreignKey:"mediaId"}),r.hasMany(i,{foreignKey:"messageId"}),i.belongsTo(r,{foreignKey:"messageId"}),s.belongsTo(a,{foreignKey:"userId"}),s.belongsTo(a,{foreignKey:"blockedUserId"}),u.belongsTo(a,{foreignKey:"userId"}),u.hasMany(o,{foreignKey:"userId"}),o.belongsTo(r,{foreignKey:"messageId"}),o.belongsTo(a,{foreignKey:"userId"}),o.belongsToMany(d,{through:"RoomMessages",foreignKey:"mediaId"}),e.exports={User:a,BlockedUser:s,MediaStorage:o,Message:r,MessageReaction:i,Notification:l,Room:d,RoomMembers:c,UserSettings:u}},2496:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=n(7143),r=s.MAIN_DB_NAME.define("MediaStorage",{userId:{type:a.INTEGER,allowNull:!1,references:{model:o,key:"id"}},fileName:{type:a.STRING,allowNull:!1},fileType:{type:a.STRING,allowNull:!1},fileSize:{type:a.INTEGER,allowNull:!1},filePath:{type:a.STRING,allowNull:!1},thumbnailPath:{type:a.STRING,allowNull:!0},storageType:{type:a.ENUM("local","cloud"),defaultValue:"local"},uploadDate:{type:a.DATE,defaultValue:a.NOW},lastAccessed:{type:a.DATE,allowNull:!0},isPublic:{type:a.BOOLEAN,defaultValue:!1},tags:{type:a.STRING,allowNull:!0},description:{type:a.TEXT,allowNull:!0},checksum:{type:a.STRING,allowNull:!0},isDeleted:{type:a.BOOLEAN,defaultValue:!1},deletedAt:{type:a.DATE,allowNull:!0},accessPermissions:{type:a.ENUM("private","public","restricted"),defaultValue:"private"},expirationDate:{type:a.DATE,allowNull:!0}},{tableName:"tbl_media_storage",timestamps:!0});e.exports=r},5150:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=s.MAIN_DB_NAME.define("Message",{roomId:{type:a.INTEGER,allowNull:!1},senderId:{type:a.INTEGER,allowNull:!1},messageType:{type:a.ENUM("text","image","video","audio","file","link","sticker","reaction","system"),defaultValue:"text"},content:{type:a.TEXT,allowNull:!0},mediaUrl:{type:a.STRING,allowNull:!0},thumbnailUrl:{type:a.STRING,allowNull:!0},fileSize:{type:a.INTEGER,allowNull:!0},isRead:{type:a.BOOLEAN,defaultValue:!1},readBy:{type:a.JSON,allowNull:!0},isEdited:{type:a.BOOLEAN,defaultValue:!1},editedAt:{type:a.DATE,allowNull:!0},isDeleted:{type:a.BOOLEAN,defaultValue:!1},deletedAt:{type:a.DATE,allowNull:!0},replyTo:{type:a.INTEGER,allowNull:!0},forwardedFrom:{type:a.INTEGER,allowNull:!0},mentions:{type:a.JSON,allowNull:!0},reactionCount:{type:a.JSON,allowNull:!0},status:{type:a.ENUM("sent","delivered","seen","failed"),defaultValue:"sent"},priority:{type:a.ENUM("normal","important","urgent"),defaultValue:"normal"},expiresAt:{type:a.DATE,allowNull:!0},pinned:{type:a.BOOLEAN,defaultValue:!1},createdAt:{type:a.DATE,defaultValue:a.NOW},updatedAt:{type:a.DATE,defaultValue:a.NOW}},{tableName:"tbl_message",timestamps:!0});e.exports=o},8901:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=n(7143),r=n(5150),i=s.MAIN_DB_NAME.define("MessageReaction",{messageId:{type:a.INTEGER,allowNull:!1,references:{model:r,key:"id"}},userId:{type:a.INTEGER,allowNull:!1,references:{model:o,key:"id"}},reactionType:{type:a.ENUM("like","love","laugh","angry","sad","wow","dislike","custom"),allowNull:!1},customReaction:{type:a.STRING,allowNull:!0},reactionIcon:{type:a.STRING,allowNull:!0},createdAt:{type:a.DATE,defaultValue:a.NOW},updatedAt:{type:a.DATE,defaultValue:a.NOW}},{tableName:"tbl_message_reaction",timestamps:!0});e.exports=i},774:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=s.MAIN_DB_NAME.define("Notification",{userId:{type:a.INTEGER,allowNull:!1},roomId:{type:a.INTEGER,allowNull:!0},type:{type:a.ENUM("message","friend_request","mention","system","reminder","announcement"),defaultValue:"message"},title:{type:a.STRING,allowNull:!1},message:{type:a.TEXT,allowNull:!1},iconUrl:{type:a.STRING,allowNull:!0},redirectUrl:{type:a.STRING,allowNull:!0},isRead:{type:a.BOOLEAN,defaultValue:!1},readAt:{type:a.DATE,allowNull:!0},isImportant:{type:a.BOOLEAN,defaultValue:!1},priority:{type:a.ENUM("low","medium","high"),defaultValue:"medium"},status:{type:a.ENUM("pending","sent","failed"),defaultValue:"pending"},scheduledAt:{type:a.DATE,allowNull:!0},expiresAt:{type:a.DATE,allowNull:!0},sentBy:{type:a.INTEGER,allowNull:!0},createdAt:{type:a.DATE,defaultValue:a.NOW},updatedAt:{type:a.DATE,defaultValue:a.NOW}},{tableName:"tbl_notifications",timestamps:!0});e.exports=o},8886:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=s.MAIN_DB_NAME.define("Room",{name:{type:a.STRING,allowNull:!0},type:{type:a.ENUM("private","group"),allowNull:!1,defaultValue:"group"},createdBy:{type:a.INTEGER,allowNull:!1},description:{type:a.TEXT,allowNull:!0},roomAvatar:{type:a.STRING,allowNull:!0},status:{type:a.ENUM("active","archived","closed"),defaultValue:"active"},isPublic:{type:a.BOOLEAN,defaultValue:!1},maxParticipants:{type:a.INTEGER,allowNull:!0},inviteLink:{type:a.STRING,allowNull:!0,unique:!0},isPinned:{type:a.BOOLEAN,defaultValue:!1},lastMessageAt:{type:a.DATE,allowNull:!0},createdAt:{type:a.DATE,defaultValue:a.NOW},updatedAt:{type:a.DATE,defaultValue:a.NOW},deletedAt:{type:a.DATE,allowNull:!0},topic:{type:a.STRING,allowNull:!0},visibility:{type:a.ENUM("public","private","restricted"),defaultValue:"private"},autoDeleteMessages:{type:a.BOOLEAN,defaultValue:!1},roomRules:{type:a.TEXT,allowNull:!0},allowReactions:{type:a.BOOLEAN,defaultValue:!0},allowMedia:{type:a.BOOLEAN,defaultValue:!0},roomPassword:{type:a.STRING,allowNull:!0},adminIds:{type:a.JSON,allowNull:!0}},{tableName:"tbl_room",timestamps:!0,paranoid:!0});e.exports=o},1623:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=s.MAIN_DB_NAME.define("RoomMembers",{roomId:{type:a.INTEGER,allowNull:!1},userId:{type:a.INTEGER,allowNull:!1},role:{type:a.ENUM("member","admin","moderator","owner"),defaultValue:"member"},isMuted:{type:a.BOOLEAN,defaultValue:!1},mutedUntil:{type:a.DATE,allowNull:!0},isBanned:{type:a.BOOLEAN,defaultValue:!1},bannedAt:{type:a.DATE,allowNull:!0},bannedBy:{type:a.INTEGER,allowNull:!0},joinDate:{type:a.DATE,defaultValue:a.NOW},leaveDate:{type:a.DATE,allowNull:!0},isPinned:{type:a.BOOLEAN,defaultValue:!1},pinnedAt:{type:a.DATE,allowNull:!0},notificationsEnabled:{type:a.BOOLEAN,defaultValue:!0},lastSeen:{type:a.DATE,allowNull:!0},isTyping:{type:a.BOOLEAN,defaultValue:!1},customNickname:{type:a.STRING,allowNull:!0},status:{type:a.ENUM("active","inactive","left","banned"),defaultValue:"active"},createdAt:{type:a.DATE,defaultValue:a.NOW},updatedAt:{type:a.DATE,defaultValue:a.NOW}},{tableName:"tbl_room_members",timestamps:!0});e.exports=o},6691:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=n(7143),r=s.MAIN_DB_NAME.define("UserSettings",{userId:{type:a.INTEGER,allowNull:!1,references:{model:o,key:"id"}},darkMode:{type:a.BOOLEAN,defaultValue:!1},notificationMuted:{type:a.BOOLEAN,defaultValue:!1},language:{type:a.STRING,defaultValue:"en"},timezone:{type:a.STRING,allowNull:!0},privacyLevel:{type:a.ENUM("public","private","friends"),defaultValue:"public"},emailNotifications:{type:a.BOOLEAN,defaultValue:!0},smsNotifications:{type:a.BOOLEAN,defaultValue:!1},pushNotifications:{type:a.BOOLEAN,defaultValue:!0},theme:{type:a.STRING,defaultValue:"default"},fontSize:{type:a.STRING,defaultValue:"medium"},showOnlineStatus:{type:a.BOOLEAN,defaultValue:!0},profileVisibility:{type:a.ENUM("everyone","friends","only_me"),defaultValue:"everyone"},soundEffectsEnabled:{type:a.BOOLEAN,defaultValue:!0},twoFactorAuthEnabled:{type:a.BOOLEAN,defaultValue:!1},autoLogoutDuration:{type:a.INTEGER,defaultValue:30},dateFormat:{type:a.STRING,defaultValue:"MM/DD/YYYY"}},{tableName:"tbl_user_settings",timestamps:!0});e.exports=r},3534:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=n(5346),r=n(7143),i={id:{type:a.INTEGER,autoIncrement:!0,primaryKey:!0},idea_id:{type:a.INTEGER,allowNull:!1,references:{model:o,key:"id"}},user_id:{type:a.INTEGER,allowNull:!1,references:{model:r,key:"id"}},comment_text:{type:a.TEXT,allowNull:!1},parent_comment_id:{type:a.INTEGER,allowNull:!0,references:{model:"tbl_comments",key:"id"}},created_at:{type:a.DATE,defaultValue:a.NOW},updated_at:{type:a.DATE,defaultValue:a.NOW},likes_by:{type:a.JSON,defaultValue:0,defaultValue:[]},dislikes_by:{type:a.JSON,defaultValue:0,defaultValue:[]},is_edited:{type:a.BOOLEAN,defaultValue:!1},edited_at:{type:a.DATE,allowNull:!0},reaction_data:{type:a.JSON,allowNull:!0},status:{type:a.STRING,allowNull:!1,defaultValue:"active"},flagged_by:{type:a.JSON,allowNull:!0},ip_address:{type:a.STRING,allowNull:!0},location:{type:a.STRING,allowNull:!0},device_type:{type:a.STRING,allowNull:!0},user_agent:{type:a.STRING,allowNull:!0},attachments:{type:a.JSON,allowNull:!0}},l=s.MAIN_DB_NAME.define("Comment",i,{tableName:"tbl_comments",timestamps:!1});e.exports=l},4111:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=n(7143),r=n(5346),i={id:{type:a.INTEGER,autoIncrement:!0,primaryKey:!0},user_id:{type:a.INTEGER,allowNull:!1,references:{model:o,key:"id"}},idea_id:{type:a.INTEGER,allowNull:!1,references:{model:r,key:"id"}},created_at:{type:a.DATE,defaultValue:a.NOW}},l=s.MAIN_DB_NAME.define("Favorite",i,{tableName:"tbl_favorites",timestamps:!1});e.exports=l},7921:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=n(7143),r={id:{type:a.UUID,defaultValue:a.UUIDV4,primaryKey:!0,allowNull:!1},user_id:{type:a.INTEGER,allowNull:!1,references:{model:o,key:"id"}},startup_name:{type:a.STRING,allowNull:!1},industry:{type:a.ENUM("Tech","Health","Finance","Education","Retail","Other"),allowNull:!1},number_of_employees:{type:a.INTEGER,allowNull:!1},stage:{type:a.ENUM("Ideation","Validation","Early Traction","Scaling"),allowNull:!1},nature_of_business:{type:a.ENUM("Product","Service","Process"),allowNull:!1},revenue_model:{type:a.TEXT,allowNull:!1},unique_value_proposition:{type:a.TEXT,allowNull:!1},pitch_deck:{type:a.STRING,allowNull:!0}},i=s.MAIN_DB_NAME.define("Founder",r,{tableName:"tbl_founders",timestamps:!0});e.exports=i},5346:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o={id:{type:a.INTEGER,autoIncrement:!0,primaryKey:!0},title:{type:a.STRING,allowNull:!1},description:{type:a.TEXT,allowNull:!1},industry:{type:a.STRING,allowNull:!0},location:{type:a.STRING,allowNull:!0},target_market:{type:a.STRING,allowNull:!0},stage:{type:a.ENUM("idea","prototype","early","growth","scale-up"),allowNull:!1,defaultValue:"idea"},funding_required:{type:a.DECIMAL(10,2),allowNull:!0},funding_type:{type:a.ENUM("seed","angel","VC","bootstrapped"),allowNull:!0},compensation:{type:a.DECIMAL(10,2),allowNull:!0},equity_share:{type:a.DECIMAL(5,2),allowNull:!0},partnership_terms:{type:a.TEXT,allowNull:!0},terms:{type:a.TEXT,allowNull:!0},expected_launch_date:{type:a.DATE,allowNull:!0},development_timeline:{type:a.TEXT,allowNull:!0},status:{type:a.ENUM("open","closed","in-progress","completed"),allowNull:!1,defaultValue:"open"},visibility:{type:a.ENUM("public","private"),allowNull:!1,defaultValue:"public"},pitch_video_url:{type:a.STRING,allowNull:!0},images:{type:a.JSON,allowNull:!0},views_count:{type:a.INTEGER,defaultValue:0},applications_count:{type:a.INTEGER,defaultValue:0},last_updated:{type:a.DATE,allowNull:!1,defaultValue:a.NOW},tags:{type:a.JSON,allowNull:!0},seeking:{type:a.JSON,allowNull:!0},location:{type:a.STRING,allowNull:!0},posted:{type:a.DATE,allowNull:!1,defaultValue:a.NOW},marketSize:{type:a.STRING,allowNull:!0},traction:{type:a.STRING,allowNull:!0},competition:{type:a.JSON,allowNull:!0},commitment:{type:a.STRING,allowNull:!0},validation:{type:a.JSON,allowNull:!0},upvotes:{type:a.INTEGER,defaultValue:0},comments:{type:a.INTEGER,defaultValue:0}},r=s.MAIN_DB_NAME.define("Idea",o,{tableName:"tbl_idea",timestamps:!0,indexes:[{fields:["status"]},{fields:["visibility"]},{fields:["posted"]},{fields:["status","visibility"]},{fields:["upvotes","views_count"]},{fields:["marketSize","traction"]},{fields:["location"]}]});e.exports=r},1419:(e,t,n)=>{const{sequelize:a}=n(7075),{User:s,UserLog:o,Role:r,Permission:i,RolePermissions:l,ApplicationProperties:d,Idea:c,UserActions:u,Like:p,Favorite:m,Share:g,Comment:y,Stats:f,UserConnection:w,Founder:h}=n(9729),{BlockedUser:b,MediaStorage:N,Message:v,MessageReaction:x,Notification:_,Room:I,RoomMembers:E,UserSettings:T}=n(363);e.exports={InitializeDatabase:async()=>{try{await Promise.all([s.sync({alter:!1}),o.sync({alter:!1}),r.sync({alter:!1}),i.sync({alter:!1}),l.sync({alter:!1}),d.sync({alter:!1}),c.sync({alter:!1}),u.sync({alter:!1}),p.sync({alter:!1}),m.sync({alter:!1}),g.sync({alter:!1}),y.sync({alter:!1}),f.sync({alter:!1}),w.sync({alter:!1}),h.sync({alter:!1}),b.sync({alter:!1}),N.sync({alter:!1}),v.sync({alter:!1}),x.sync({alter:!1}),_.sync({alter:!1}),I.sync({alter:!1}),E.sync({alter:!1}),T.sync({alter:!1})])}catch(e){console.error("Error syncing database:",e)}}}},7459:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o={id:{type:a.UUID,defaultValue:a.UUIDV4,primaryKey:!0},name:{type:a.STRING,allowNull:!1},email:{type:a.STRING,allowNull:!1},phone:{type:a.STRING,allowNull:!0},address:{type:a.TEXT,allowNull:!0},website:{type:a.STRING,allowNull:!0},industryType:{type:a.STRING,allowNull:!0},numEmployees:{type:a.INTEGER,allowNull:!0},registrationNumber:{type:a.STRING,allowNull:!0},taxId:{type:a.STRING,allowNull:!0},logo:{type:a.STRING,allowNull:!0},foundedDate:{type:a.DATE,allowNull:!0},founderName:{type:a.STRING,allowNull:!0},ownerId:{type:a.UUID,allowNull:!0},socialLinks:{type:a.JSON,allowNull:!0},termsAndConditions:{type:a.TEXT,allowNull:!0},privacyPolicy:{type:a.TEXT,allowNull:!0},emailSettings:{type:a.JSON,allowNull:!0},apiKey:{type:a.STRING,allowNull:!0},status:{type:a.ENUM("active","inactive"),allowNull:!1,defaultValue:"active"},createdAt:{type:a.DATE,allowNull:!1,defaultValue:a.NOW},updatedAt:{type:a.DATE,allowNull:!1,defaultValue:a.NOW}},r=s.MAIN_DB_NAME.define("Organization",o,{tableName:"tbl_organization",timestamps:!0});e.exports=r},4131:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o={id:{type:a.INTEGER,autoIncrement:!0,primaryKey:!0},name:{type:a.STRING(100),allowNull:!1,unique:!0},description:{type:a.STRING,allowNull:!0},level:{type:a.STRING(100),allowNull:!1,defaultValue:"A1"},parent_permission_id:{type:a.INTEGER,allowNull:!0},is_leaf:{type:a.BOOLEAN,allowNull:!1,defaultValue:!1},status:{type:a.STRING(50),allowNull:!1,defaultValue:"active"},assigned_to:{type:a.STRING(100),allowNull:!0},valid_from:{type:a.DATE,allowNull:!0},valid_until:{type:a.DATE,allowNull:!0},priority:{type:a.INTEGER,allowNull:!0},department:{type:a.STRING(100),allowNull:!0},region:{type:a.STRING(100),allowNull:!0},resource_type:{type:a.STRING(100),allowNull:!0},action_type:{type:a.STRING(100),allowNull:!0},permission_group_id:{type:a.INTEGER,allowNull:!0}},r=s.MAIN_DB_NAME.define("Permission",o,{tableName:"tbl_permission",timestamps:!0});e.exports=r},9764:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o={id:{type:a.INTEGER,autoIncrement:!0,primaryKey:!0},idea_id:{type:a.INTEGER,allowNull:!0},name:{type:a.STRING(100),allowNull:!1,unique:!0},description:{type:a.TEXT,allowNull:!0,defaultValue:"No description"},created_by:{type:a.STRING,allowNull:!1},updated_by:{type:a.STRING,allowNull:!1}},r=s.MAIN_DB_NAME.define("Role",o,{tableName:"tbl_role",timestamps:!0});e.exports=r},7938:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o={role_id:{type:a.INTEGER,primaryKey:!0},permission_id:{type:a.INTEGER,primaryKey:!0}},r=s.MAIN_DB_NAME.define("RolePermissions",o,{tableName:"tbl_role_permissions",timestamps:!1});e.exports=r},2672:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=n(7143),r=n(5346),i={id:{type:a.INTEGER,autoIncrement:!0,primaryKey:!0},user_id:{type:a.INTEGER,allowNull:!1,references:{model:o,key:"id"}},idea_id:{type:a.INTEGER,allowNull:!1,references:{model:r,key:"id"}},platform:{type:a.STRING,allowNull:!1},created_at:{type:a.DATE,defaultValue:a.NOW}},l=s.MAIN_DB_NAME.define("Share",i,{tableName:"tbl_shares",timestamps:!0});e.exports=l},6297:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=(n(7143),s.MAIN_DB_NAME.define("Stats",{id:{type:a.BIGINT,autoIncrement:!0,primaryKey:!0},entity_type:{type:a.ENUM("idea","user","project","comment","post","article","event","company","job_listing","profile","resume"),allowNull:!1},entity_id:{type:a.BIGINT,allowNull:!1},views:{type:a.BIGINT,allowNull:!1,defaultValue:0},upvotes:{type:a.BIGINT,allowNull:!1,defaultValue:0},downvotes:{type:a.BIGINT,allowNull:!1,defaultValue:0},comments:{type:a.BIGINT,allowNull:!1,defaultValue:0},followers:{type:a.BIGINT,allowNull:!1,defaultValue:0},favorites:{type:a.BIGINT,allowNull:!1,defaultValue:0},reports:{type:a.BIGINT,allowNull:!1,defaultValue:0},shares:{type:a.BIGINT,allowNull:!1,defaultValue:0},downloads:{type:a.BIGINT,allowNull:!1,defaultValue:0},bookmarks:{type:a.BIGINT,allowNull:!1,defaultValue:0},applied:{type:a.BIGINT,allowNull:!1,defaultValue:0},saves:{type:a.BIGINT,allowNull:!1,defaultValue:0},messages:{type:a.BIGINT,allowNull:!1,defaultValue:0},ratings:{type:a.BIGINT,allowNull:!1,defaultValue:0},average_rating:{type:a.FLOAT,allowNull:!1,defaultValue:0},edits:{type:a.BIGINT,allowNull:!1,defaultValue:0},deletes:{type:a.BIGINT,allowNull:!1,defaultValue:0},feedbacks:{type:a.BIGINT,allowNull:!1,defaultValue:0},subscriptions:{type:a.BIGINT,allowNull:!1,defaultValue:0},unsubscribes:{type:a.BIGINT,allowNull:!1,defaultValue:0},last_updated:{type:a.DATE,allowNull:!1,defaultValue:a.NOW}},{tableName:"tbl_stats",timestamps:!0,indexes:[{fields:["entity_type","entity_id"]},{fields:["views"]},{fields:["upvotes"]},{fields:["followers"]}]}));e.exports=o},6094:(e,t,n)=>{const{Like:a,Favorite:s,Share:o,Comment:r,Stats:i,Idea:l}=n(9729),d=async(e,t,n,a="increment")=>{try{const s={views:"views",upvotes:"upvotes",downvotes:"downvotes",comments:"comments",followers:"followers",favorites:"favorites",reports:"reports",shares:"shares",downloads:"downloads",bookmarks:"bookmarks",applied:"applied",saves:"saves",messages:"messages",ratings:"ratings",average_rating:"average_rating",edits:"edits",deletes:"deletes",feedbacks:"feedbacks",subscriptions:"subscriptions",unsubscribes:"unsubscribes",last_updated:"last_updated"}[e.toLowerCase()];if(!s)return void console.log(`No column mapping found for model: ${e}`);const[o,r]=await i.findOrCreate({where:{entity_type:t,entity_id:n},defaults:{entity_type:t,entity_id:n}});"increment"===a?(await o.increment(s),console.log(`Incremented ${s} for entity_type: ${t}, entity_id: ${n}`)):"decrement"===a&&(await o.decrement(s),console.log(`Decremented ${s} for entity_type: ${t}, entity_id: ${n}`))}catch(t){console.error(`Error updating ${e} count in Stats for entity_id ${n}:`,t)}};[l,a,s,o,r].forEach((e=>{e.addHook("afterCreate",(async(t,n)=>{const a=e.name.toLowerCase(),s=t.id;await d(a,a,s,"increment")})),e.addHook("beforeDestroy",(async(t,n)=>{const a=e.name.toLowerCase(),s=t.id;await d(a,a,s,"decrement")}))})),e.exports={Like:a,Favorite:s,Share:o,Comment:r,Stats:i,updateStats:d}},7143:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o={id:{type:a.INTEGER,autoIncrement:!0,primaryKey:!0},username:{type:a.STRING(50),allowNull:!1},email:{type:a.STRING(100),allowNull:!1},password:{type:a.STRING(255),allowNull:!1},first_name:{type:a.STRING(50),allowNull:!1},last_name:{type:a.STRING(50),allowNull:!1},date_of_birth:{type:a.DATEONLY,allowNull:!0},phone_number:{type:a.STRING(15),allowNull:!0},whatsapp_number:{type:a.STRING(15),allowNull:!0},address:{type:a.TEXT,allowNull:!0},status:{type:a.ENUM("active","inactive","banned","online","offline","away","do_not_disturb"),defaultValue:"active"},otp:{type:a.STRING,allowNull:!0},expiryTime:{type:a.DATE,allowNull:!0},isVerified:{type:a.BOOLEAN,defaultValue:!1},permission_ids:{type:a.JSON},user_metadata:{type:a.JSON,allowNull:!0}},r=s.MAIN_DB_NAME.define("User",o,{tableName:"tbl_user",timestamps:!0});e.exports=r},1496:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=s.MAIN_DB_NAME.define("UserActions",{id:{type:a.INTEGER,autoIncrement:!0,primaryKey:!0},user_id:{type:a.INTEGER,allowNull:!1},action_type:{type:a.ENUM("create","post","view","like","upvotes","comment","share","apply","save","report","follow","unfollow","subscribe","download","upload","message","review","rate","bookmark","edit","delete","feedback","favorite","unfavorite"),allowNull:!1},entity_type:{type:a.ENUM("idea","profile","comment","project","resume","portfolio","post","article","event","company","job_listing"),allowNull:!1},entity_id:{type:a.INTEGER,allowNull:!1},details:{type:a.JSON,allowNull:!0},favorited_by:{type:a.INTEGER,allowNull:!0},ip_address:{type:a.STRING,allowNull:!0},user_agent:{type:a.STRING,allowNull:!0},device_type:{type:a.ENUM("desktop","mobile","tablet"),allowNull:!0},location:{type:a.STRING,allowNull:!0},timestamp:{type:a.DATE,allowNull:!1,defaultValue:a.NOW},status:{type:a.ENUM("active","inactive","deleted"),allowNull:!1,defaultValue:"active"},comment_text:{type:a.STRING,allowNull:!0},idea_id:{type:a.INTEGER,allowNull:!0}},{tableName:"tbl_user_actions",timestamps:!0,indexes:[{fields:["user_id"]},{fields:["action_type"]},{fields:["entity_type","entity_id"]},{fields:["timestamp"]},{fields:["favorited_by"]},{fields:["idea_id"]}]});e.exports=o},2658:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=n(7143),r=s.MAIN_DB_NAME.define("UserConnection",{id:{type:a.INTEGER,primaryKey:!0,autoIncrement:!0},user_id:{type:a.INTEGER,allowNull:!1,references:{model:o,key:"id"}},connected_user_ids:{type:a.JSON,allowNull:!1,defaultValue:[]},sended_requests:{type:a.JSON,allowNull:!1,defaultValue:[]},pending_requests:{type:a.JSON,allowNull:!1,defaultValue:[]},accepted_requests:{type:a.JSON,allowNull:!1,defaultValue:[]},rejected_requests:{type:a.JSON,allowNull:!1,defaultValue:[]},blocked_requests:{type:a.JSON,allowNull:!1,defaultValue:[]},visibility:{type:a.ENUM("public","private","connections_only"),defaultValue:"connections_only"},mutual_connection_ids:{type:a.JSON,allowNull:!1,defaultValue:[]},is_favorite:{type:a.JSON,allowNull:!1,defaultValue:[]},interaction_user_ids:{type:a.JSON,allowNull:!1,defaultValue:[]}},{timestamps:!0,tableName:"tbl_user_connections"});e.exports=r},5810:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=n(7143),r={id:{type:a.INTEGER,autoIncrement:!0,primaryKey:!0},user_id:{type:a.INTEGER,allowNull:!1,references:{model:o,key:"id"}},entity_type:{type:a.ENUM("post","comment","Idea"),allowNull:!1},entity_id:{type:a.INTEGER,allowNull:!1},created_at:{type:a.DATE,defaultValue:a.NOW}},i=s.MAIN_DB_NAME.define("Like",r,{tableName:"tbl_likes",timestamps:!1});e.exports=i},8713:(e,t,n)=>{const{DataTypes:a}=n(9031),{sequelize:s}=n(7075),o=n(7143),r={id:{type:a.UUID,primaryKey:!0,allowNull:!1,defaultValue:a.UUIDV4},user_id:{type:a.INTEGER,allowNull:!0,references:{model:o,key:"id"}},updatedAt:{type:a.DATE,allowNull:!1,defaultValue:a.NOW},sourceIp:{type:a.STRING(45),allowNull:!1},relatedInfo:{type:a.TEXT,allowNull:!0},logoffBy:{type:a.ENUM("SYSTEM","USER"),allowNull:!0},logoffAt:{type:a.DATE,allowNull:!0},loginAt:{type:a.DATE,allowNull:!0,defaultValue:a.NOW},jwtToken:{type:a.TEXT,allowNull:!1},createdAt:{type:a.DATE,allowNull:!1,defaultValue:a.NOW}},i=s.MAIN_DB_NAME.define("UserLog",r,{tableName:"tbl_user_log",timestamps:!1,underscored:!0});e.exports=i},7959:(e,t,n)=>{const a=n(7252).Router(),s=n(1375),{propertyValidationSchema:o,propertyBulkValidationSchema:r}=n(5207),i=n(4694);a.post("/property",s(o),i.createOrUpdateProperty).post("/properties/bulk",s(r),i.createOrUpdateBulkProperties).get("/properties",i.getAllProperties).get("/property/:id",i.getPropertyById).delete("/property/:id",i.deleteProperty),e.exports=a},7045:(e,t,n)=>{const a=n(7252),s=n(1375),o=n(2158),{ideaValidationSchema:r,updateIdeaValidationSchema:i}=n(7880),l=a.Router();l.post("/create",s(r),o.createIdea).get("/ideas",o.getAllIdeas).get("/ideas/:id",o.getIdeaById).get("/user/:id",o.getIdeaByUserId).put("/ideas/:id",s(i),o.updateIdea).delete("/ideas/:id",o.deleteIdea).post("/ideas/:id/view",o.incrementViews).post("/ideas/:id/upvote",o.upvoteIdea).post("/ideas/:id/comment",o.addComment).get("/ideas/search/:title",o.searchIdeasByTitle).get("/ideas/latest",o.getLatestIdeas).get("/ideas/popular",o.getPopularIdeas).get("/ideas/recommended",o.getRecommendedIdeas).get("/ideas/:id/related",o.getRelatedIdeas).get("/ideas/:id/comments",o.getIdeaComments).post("/ideas/:id/follow",o.followIdea).get("/ideas/:id/followers",o.getIdeaFollowers).post("/ideas/:id/report",o.reportIdea).put("/ideas/:id/status",o.updateIdeaStatus).get("/ideas/status/:status",o.getIdeasByStatus).get("/user/:userId/ideas",o.getIdeasByUser).get("/user/:userId/favorites",o.getFavoriteIdeas).post("/user/:userId/favorite/:ideaId",o.addToFavorites).delete("/user/:userId/favorite/:ideaId",o.removeFromFavorites),e.exports=l},6039:(e,t,n)=>{const a=n(7252),s=n(864),o=a.Router();o.post("/generate/:email",s.generate).post("/verify",s.verify),e.exports=o},6772:(e,t,n)=>{const a=n(7252),s=n(7211),o=n(8996),r=n(1375),{loginSchema:i,resetPasswordSchema:l,changePasswordSchema:d,refreshTokenSchema:c}=n(4934),u=a.Router();u.post("/login",r(i),s.login).post("/logout",o,s.logout).post("/forget-password/:email",o,s.forgetPassword).post("/reset-password",r(l),o,s.resetPassword).post("/change-password",r(d),o,s.changePassword).post("/refresh-token",r(c),o,s.refreshToken).get("/organization",s.getOrganization).post("/organization",o,s.upsertOrganization),e.exports=u},5226:(e,t,n)=>{const a=n(7252),s=n(8996),o=n(6772),r=n(702),i=n(209),l=n(4183),d=n(6039),c=n(7959),u=n(7045),{userRouter:p,userActionsRouter:m}=n(2869),{roomRouter:g,notificationRouter:y,messageRouter:f}=n(2823),w=a.Router();w.use("/",o).use("/roles",r).use("/permissions",i).use("/users",p).use("/user-actions",s,m).use("/user_logs",s,l).use("/totp",s,d).use("/application",c).use("/idea",s,u).use("/messages",f).use("/notifications",s,y).use("/rooms",s,g),e.exports=w},209:(e,t,n)=>{const a=n(7252),s=n(1926),o=n(1375),{permissionCreateSchema:r,permissionUpdateSchema:i}=n(8452),l=a.Router();l.post("/",o(r),s.createPermissions).get("/",s.getAllPermissions).get("/:id",s.getPermissionById).put("/:id",o(i),s.updatePermission).delete("/:id",s.deletePermission).get("/tree/:userId",s.getUserPermissionTree).get("/tree",s.getAllPermissionsTree),e.exports=l},702:(e,t,n)=>{const a=n(7252),s=n(633),o=n(1375),{roleCreateSchema:r,rolePermissionsAssignSchema:i,roleUpdateSchema:l}=n(8452),d=a.Router();d.post("/",o(r),s.createRoles).post("/:roleId/permissions",s.assignPermissionsToRole).post("/:userID/user-permissions",s.assignPermissionsToUser).get("/",s.getAllRoles).get("/:id",s.getRoleById).put("/:id",o(l),s.updateRole).delete("/:id",s.deleteRole),e.exports=d},4183:(e,t,n)=>{const a=n(7252),s=n(3922),{userLogCreateSchema:o,userLogUpdateSchema:r}=(n(1375),n(783)),i=a.Router();i.post("/",s.createUserLog).get("/",s.getAllUserLogs).get("/:id",s.getUserLogById).put("/:id",s.updateUserLog).delete("/:id",s.deleteUserLog).delete("/logs_range/:start_date/to/:end_date",s.deleteLogsInRange),e.exports=i},2869:(e,t,n)=>{const a=n(7252),s=n(6339),o=n(8996),{userSchema:r,userUpdateSchema:i}=n(1023),l=n(6550),d=n(839),c=a.Router(),u=a.Router();c.post("/",s(r),l.createUser).get("/verify",l.verifyCreateUser).get("/:userId/permissions/:permissionName",o,l.checkUserPermission).get("/",l.getAllUsers).get("/:id",l.getUserById).put("/:id",o,s(i),l.updateUser).delete("/:id",o,l.deleteUser).delete("/user_range/:start_id/to/:end_id",o,l.deleteUserRanges),u.post("/:action/:id",d.actionOnIdea).post("/log",d.logUserAction).get("/:userId",d.getUserActions).get("/type/:actionType",d.getActionsByType).get("/entity/:entityType/:entityId",d.getEntityActions).get("/count/type/:actionType",d.countActionsByType).get("/recent",d.getRecentActions).get("/popular/:entityType",d.getPopularEntities).get("/date-range/:startDate/:endDate",d.getActionsByDateRange).delete("/:id",d.deleteUserAction).put("/:id",d.updateUserAction).post("/request/:userId/:targetUserId/:action",d.ConnectionRequest).get("/request/:userId",d.getConnectionData),e.exports={userRouter:c,userActionsRouter:u}},792:(e,t,n)=>{const{ApplicationProperties:a}=n(9729);e.exports={createOrUpdateProperty:async e=>{try{const t=await a.findOne({where:{property_name:e.property_name,property_value:e.property_value}});return t?{message:"Application property updated successfully.",result:await t.update(e)}:{message:"Application property created successfully.",result:await a.create(e)}}catch(e){throw new Error("Error while creating/updating application property: "+e.message)}},createOrUpdateBulkProperties:async e=>{try{const t=[];for(const n of e){const e=await a.findOne({where:{property_name:n.property_name,property_value:n.property_value}});if(e){const a=await e.update(n);t.push({message:"Application property updated successfully.",property:a})}else{const e=await a.create(n);t.push({message:"Application property created successfully.",property:e})}}return t}catch(e){throw new Error("Error while creating/updating application properties: "+e.message)}},getAllProperties:async()=>{try{return await a.findAll()}catch(e){throw new Error("Error while fetching application properties: "+e.message)}},getPropertyById:async e=>{try{return await a.findOne({where:{id:e}})}catch(e){throw new Error("Error while fetching the application property: "+e.message)}},deleteProperty:async e=>{try{const t=await a.findOne({where:{id:e}});if(t)return await t.destroy(),{message:"Property deleted successfully"};throw new Error("Property not found")}catch(e){throw new Error("Error while deleting the application property: "+e.message)}}}},7988:(e,t,n)=>{const{Op:a}=n(9031),{JWT_CONFIG:s}=n(9167),{comparePassword:o,hashPassword:r}=n(3300),{generateToken:i,verifyToken:l}=n(1199),{generateOTPTimestamped:d}=n(5963),{sendResetPasswordCodeEmail:c,sendPasswordChangeEmail:u}=n(2149),{User:p,UserLog:m,Role:g,Permission:y,Organization:f}=n(9729),w={login:async(e,t,n,s)=>{const r=await p.findOne({where:{[a.or]:[{email:e},{username:e}]},attributes:["id","username","email","password","first_name","last_name","date_of_birth","phone_number","address","status"],include:[{model:g,attributes:["id","name","description"]}]});if(!r)throw new Error("Invalid credentials");if(!await o(t,r.password))throw new Error("Invalid credentials");return{token:i(r,n,s),user:r}},logout:async(e,t,n)=>{if(!t)throw new Error("No token provided for logout");return await m.create({userId:e,sourceIp:n,logoffBy:"USER",logoffAt:new Date,jwtToken:t}),{message:"Successfully logged out"}},changePassword:async(e,t,n)=>{try{const a=await models.MAIN.User.findByPk(e);if(!a)throw new Error("User not found");if(!await o(t,a.password))throw new Error("Old password is incorrect");const s=await r(n,10);return await models.MAIN.User.update({password:s},{where:{id:e}}),await u(e,a.email,a.username),{message:"Password changed successfully"}}catch(e){throw new Error("Password change failed",e)}},forgetPassword:async e=>{const t=await models.MAIN.User.findOne({where:{email:e}});if(!t)throw new Error("User not found");const{otp:n,expiryTime:a}=d();t.otp=n,t.expiryTime=a;const s=((e,t)=>`http://localhost:5000/verify?userId=${e}&otp=${t}`)(t.id,n),o=`http://localhost:5000/reset-password?userId=${t.id}&token=${n}`;return await c(t.id,t.username,t.email,s,o,n),await t.save(),{message:"OTP sent to your email"}},upsertOrganization:async e=>{try{const t=await f.findOne();return t?(await t.update(e),{...t.toJSON(),isNewRecord:!1}):{...(await f.create(e)).toJSON(),isNewRecord:!0}}catch(e){throw console.error("Error in upsertOrganization:",e),new Error("Failed to upsert organization")}},getOrganization:async()=>{try{const e=await f.findOne();return e?e.toJSON():null}catch(e){throw console.error("Error in getOrganization:",e),new Error("Failed to fetch organization details")}}};e.exports=w},5942:(e,t,n)=>{const{Op:a}=n(9031),{sequelize:s}=n(7075),{Idea:o,UserActions:r}=n(9729);e.exports={createIdeaWithUserAction:async(e,t)=>{const n=await s.MAIN_DB_NAME.transaction();try{const a=await o.create({...t,user_id:e.userId},{transaction:n});return await r.create({user_id:e.userId,action_type:"create",entity_type:"idea",entity_id:a.id,details:{title:t.title,description:t.description},ip_address:e.ip||"127.0.0.1",user_agent:t.user_agent||"unknown",device_type:t.device_type||"desktop",location:t.location||"unknown",idea_id:a.id},{transaction:n}),await n.commit(),{success:!0,idea:a}}catch(e){throw await n.rollback(),console.error("Error creating idea and user action:",e),new Error("Transaction failed: "+e.message)}},getAllIdeas:async()=>await o.findAll(),getIdeaById:async e=>await o.findByPk(e),getIdeaByUserId:async e=>{const t=await o.findAll({include:{model:r,as:"ideaactions",where:{user_id:e,entity_type:"idea"},attributes:[],required:!0}});if(!t.length)throw new Error("No ideas found for this user.");return t},updateIdea:async(e,t)=>{const n=await o.findByPk(e);if(!n)throw new Error("Idea not found");return await n.update(t)},deleteIdea:async e=>{const t=await o.findByPk(e);if(!t)throw new Error("Idea not found");return await t.destroy()},incrementViews:async e=>{const t=await o.findByPk(e);if(!t)throw new Error("Idea not found");return t.views_count++,await t.save()},upvoteIdea:async e=>{const t=await o.findByPk(e);if(!t)throw new Error("Idea not found");return t.upvotes++,await t.save()},addComment:async e=>{const t=await o.findByPk(e);if(!t)throw new Error("Idea not found");return t.comments++,await t.save(),await t.save()},searchIdeasByTitle:async e=>await o.findAll({where:{title:{[a.like]:`%${e}%`}}}),getLatestIdeas:async()=>await o.findAll({order:[["posted","DESC"]],limit:10}),getPopularIdeas:async()=>await o.findAll({order:[["upvotes","DESC"]],limit:10}),getRecommendedIdeas:async()=>await o.findAll({order:[["views_count","DESC"]],limit:10}),getRelatedIdeas:async e=>{const t=await o.findByPk(e);return await o.findAll({where:{industry:t.industry,id:{[a.ne]:e}}})},getIdeaComments:async e=>await o.findByPk(e,{attributes:["comments"]}),followIdea:async e=>await o.increment("followers_count",{where:{id:e}}),getIdeaFollowers:async e=>await o.findByPk(e,{attributes:["followers_count"]}),reportIdea:async e=>await o.update({reported:!0},{where:{id:e}}),updateIdeaStatus:async(e,t)=>await o.update({status:t},{where:{id:e}}),getIdeasByStatus:async e=>await o.findAll({where:{status:e}}),getIdeasByUser:async e=>await o.findAll({where:{userId:e}}),getFavoriteIdeas:async e=>await o.findAll({where:{favoritedBy:e}}),addToFavorites:async(e,t)=>(await o.findByPk(t),await o.update({favoritedBy:e})),removeFromFavorites:async(e,t)=>{const n=await o.findByPk(t);if(n.favoritedBy.includes(e))throw new Error("Idea already favorited by this user");n.favoritedBy.push(e),await n.update({favoritedBy:n.favoritedBy}),await r.create({user_id:e,action_type:"favorite",entity_type:"idea",entity_id:t,favorited_by:e,timestamp:new Date,status:"active"})}}},7022:(e,t,n)=>{const a=n(4131),s=n(9764),o=n(7143);e.exports={createPermission:async e=>a.bulkCreate(e),getAllPermissions:async()=>await a.findAll(),getPermissionById:async e=>a.findByPk(e),updatePermission:async(e,t)=>a.update(t,{where:{id:e}}),deletePermission:async e=>a.destroy({where:{id:e}}),getUserPermissionTree:async()=>{try{const e=await o.findAll({include:{model:s,include:{model:a,through:{attributes:[]}}}});if(!e)throw new Error("User not found");return e}catch(e){throw new Error("Error fetching user permissions: "+e.message)}}}},7686:(e,t,n)=>{const a=n(4131),s=n(9764),o=(n(7938),n(7143)),{getUserById:r}=n(2350);e.exports={createRoles:async e=>s.bulkCreate(e),assignPermissionsToRole:async(e,t)=>{const n=await s.findByPk(e);if(!n)throw new Error("Role not found");const o=await a.findAll({where:{id:t}});if(!o.length)throw new Error("Permissions not found");return await n.addPermissions(o),{message:"Permissions assigned to role successfully",role:n,permissions:o}},_assignPermissionsToUserInDB:async(e,t)=>{try{if(!Array.isArray(t)||0===t.length)return{message:"No valid permissions to update."};const[n]=await o.update({permission_ids:t},{where:{id:e}});return{message:"User permissions updated successfully",updatedUser:n}}catch(e){return console.error("Error updating user permissions:",e.message),{error:e.message}}},assignPermissionsToUser:async(t,n)=>{try{const a=await r(t);if(!a)throw new Error("User not found");if(!a.Role||!a.Role.id)throw new Error("User role is missing");const s=await e.exports.getRoleById(a.Role.id);if(!s)throw new Error("Role not found");if(!s.role||!s.role.Permissions)throw new Error("Role or permissions not found");const o=s.role.Permissions.map((e=>e&&e.id?e.id:null)).filter((e=>null!==e)),i=n.filter((e=>o.includes(e))),l=n.filter((e=>!o.includes(e)));let d=null;if(i.length>0)try{d=await e.exports._assignPermissionsToUserInDB(t,i)}catch(e){return console.error("Error in _assignPermissionsToUserInDB:",e.message),{message:"Failed to update permissions",validPermissions:i,invalidPermissions:l,error:e.message}}return{updatedPermissions:d,validPermissions:i,invalidPermissions:l}}catch(e){console.error("Error in assignPermissionsToUser:",e.message)}},getAllRoles:async()=>s.findAll({include:a}),getRoleById:async e=>({role:await s.findByPk(e,{include:{model:a,through:{attributes:[]}}})}),updateRole:async(e,t)=>s.update(t,{where:{id:e}}),deleteRole:async e=>s.destroy({where:{id:e}})}},5428:(e,t,n)=>{const a=n(3968),s=n(5634);e.exports={generateTotp:async e=>{const t=await User.findOne({where:{email:e},include:[{model:Role,include:[{model:Permission}]}]}),n=a.generateSecret({length:50}),o=`otpauth://totp/${t}?secret=${n.base32}&issuer=@ManishYelam$..!`,r=await s.toDataURL(o);return{secret:n.base32,qrCodeUrl:r}},verifyTotp:(e,t)=>a.totp.verify({secret:t,encoding:"base32",token:e,window:1})}},830:(e,t,n)=>{const{Op:a}=n(9031),{UserActions:s,Idea:o,UserConnection:r,Comment:i,Like:l,Favorite:d}=n(9729),{updateStats:c}=n(6094),{sequelize:u}=n(7075),{exists:p}=n(4652);e.exports={actionOnIdea:async(e,t,n)=>{const a=await u.MAIN_DB_NAME.transaction();try{const r=await o.findByPk(t,{transaction:a,lock:!0,include:[{model:i,where:{status:"active"},required:!1}]});if(!r)throw new Error("Idea not found");const u={comment:async()=>{try{if(!e.body.commentText?.trim())throw new Error("Comment text cannot be empty");const[n,s]=await i.findOrCreate({where:{id:e.body.commentId,user_id:e.userId,idea_id:t},defaults:{comment_text:e.body.commentText,parent_comment_id:e.body.parentCommentId||null,ip_address:e.ip||"127.0.0.1",device_type:e.deviceType||"unknown",is_edited:!1,edited_at:null},transaction:a});return s||(n.comment_text=e.body.commentText,n.is_edited=!0,n.edited_at=new Date,await n.save({transaction:a})),await c("comments","idea",t,"increment",a),n}catch(e){throw console.error("Error processing comment:",e.message),e}},commentLikeDislike:async()=>{try{if(!e.body.commentId)throw new Error("Comment ID is required");const t=await i.findOne({where:{id:e.body.commentId,status:"active"},transaction:a});if(!t)throw new Error("Comment not found or inactive");const n="like"===e.body.likeOrDislike?"likes_by":"dislikes_by",s=new Set(t[n]||[]);return s.has(e.userId)?s.delete(e.userId):s.add(e.userId),await t.update({[n]:Array.from(s)},{transaction:a}),t}catch(e){throw console.error(`Error processing comment ${actionType}:`,e.message),e}},deleteComment:async()=>{try{const n=await i.findOne({where:{id:e.body.commentId,idea_id:t,user_id:e.userId},transaction:a});if(!n)throw new Error("Comment not found or unauthorized");return await n.destroy({transaction:a}),await c("comments","idea",t,"decrement",a),{success:!0,message:"Comment deleted successfully"}}catch(e){throw console.error("Error deleting comment:",e.message),e}},flag_comment:async()=>{try{const n=await i.findOne({where:{id:e.body.commentId,idea_id:t,status:"active"},transaction:a});if(!n)throw new Error("Comment not found");const s=Array.isArray(n.flagged_by)?new Set(n.flagged_by):new Set;return s.add(e.userId),await n.update({status:"flagged",flagged_by:Array.from(s)},{transaction:a}),{success:!0,message:"Comment flagged successfully"}}catch(e){throw console.error("Error flagging comment:",e.message),e}},like:async()=>{const[n,s]=await l.findOrCreate({where:{user_id:e.userId,entity_id:r.id,entity_type:"Idea"},defaults:{user_id:e.userId,entity_id:r.id,entity_type:"Idea"},transaction:a});return s?(await c("upvotes","idea",t,"increment",a),{success:!0,message:"Idea liked"}):(await n.destroy({transaction:a}),await c("upvotes","idea",t,"decrement",a),{success:!0,message:"Like removed"})},favorite:async()=>{const[t,n]=await d.findOrCreate({where:{user_id:e.userId,idea_id:r.id},defaults:{user_id:e.userId,idea_id:r.id},transaction:a});return n?(await c("favorites","idea",r.id,"increment",a),{success:!0,message:"Idea favorited"}):(await t.destroy({transaction:a}),await c("favorites","idea",r.id,"decrement",a),{success:!0,message:"Favorite removed"})},genericAction:async t=>{const n=await s.findOne({where:{user_id:e.userId,action_type:t,entity_id:r.id,entity_type:"idea"},transaction:a});return n?(await n.destroy({transaction:a}),await r.decrement(`${t}_count`,{transaction:a}),{success:!0,message:`Removed ${t}`}):(await s.create({user_id:e.userId,action_type:t,entity_type:"idea",entity_id:r.id,ip_address:e.ip||"127.0.0.1",user_agent:e.userAgent||"unknown"},{transaction:a}),await r.increment(`${t}_count`,{transaction:a}),{success:!0,message:`Added ${t}`})}};if(u[n]){const e=await u[n]();return await a.commit(),e}{const e=await u.genericAction(n);return await a.commit(),e}}catch(e){throw await a.rollback(),console.error(`Action Failed: ${n}`,e.message),e}},ConnectionRequest:async(e,t,n)=>{try{const a={sendRequest:async()=>{const[n,a]=await r.findOrCreate({where:{user_id:e},defaults:{sended_requests:[],pending_requests:[],accepted_requests:[],rejected_requests:[],blocked_requests:[],visibility:"connections_only",mutual_connections_count:0,is_favorite:[],interaction_count:0}}),[s,o]=await r.findOrCreate({where:{user_id:t},defaults:{sended_requests:[],pending_requests:[],accepted_requests:[],rejected_requests:[],blocked_requests:[],visibility:"connections_only",mutual_connections_count:0,is_favorite:[],interaction_count:0}});return n.sended_requests.includes(t)?(n.set("sended_requests",n.sended_requests.filter((e=>e!==t))),s.set("pending_requests",s.pending_requests.filter((t=>t!==e))),await n.save(),await s.save(),{message:"Connection request already sent, reversed the request.",userConnection:n,targetConnection:s}):(n.set("sended_requests",[...n.sended_requests,t]),s.set("pending_requests",[...s.pending_requests,e]),await n.save(),await s.save(),{message:"Connection request sent successfully.",userConnection:n,targetConnection:s})},acceptRequest:async()=>{const n=await r.findOne({where:{user_id:e}});if(!n||!n.pending_requests.includes(t))throw new Error("Connection request not found in pending requests.");const a=n.pending_requests.filter((e=>e!==t));n.set("pending_requests",a);const s=[...n.accepted_requests,t];n.set("accepted_requests",s);const o=[...n.connected_user_ids,t];return n.set("connected_user_ids",o),await n.save(),n},rejectRequest:async()=>{const n=await r.findOne({where:{user_id:e}});if(!n||!n.pending_requests.includes(t))throw new Error("Connection request not found.");const a=n.pending_requests.filter((e=>e!==t));n.set("pending_requests",a);const s=[...n.rejected_requests,t];return n.set("rejected_requests",s),await n.save(),n},blockUser:async()=>{const n=await r.findOne({where:{user_id:e}});if(!n)throw new Error("User connection not found");if(n.blocked_requests.includes(t))throw new Error("User already blocked.");const a=n.connected_user_ids.filter((e=>e!==t));n.set("connected_user_ids",a);const s=[...n.blocked_requests,t];return n.set("blocked_requests",s),n.set("blocked_at",new Date),await n.save(),n},unblockUser:async()=>{const n=await r.findOne({where:{user_id:e}});if(!n||!n.blocked_requests.includes(t))throw new Error("User not blocked.");const a=n.blocked_requests.filter((e=>e!==t));return n.set("blocked_requests",a),n.set("blocked_at",null),await n.save(),n},markAsFavorite:async()=>{const n=await r.findOne({where:{user_id:e}});if(!n||!n.connected_user_ids.includes(t))throw new Error("User is not connected.");if(n.is_favorite.includes(t))throw new Error("User already marked as favorite.");const a=[...n.is_favorite,t];return n.set("is_favorite",a),await n.save(),n},updateMutualConnections:async(e,t)=>{const n=await r.findOne({where:{user_id:e}}),a=await r.findOne({where:{user_id:t}});if(!n||!a)throw new Error("User connections not found.");const s=n.connected_user_ids.filter((e=>a.connected_user_ids.includes(e)));n.set("mutual_connection_ids",s),a.set("mutual_connection_ids",s),await n.save(),await a.save()},updateInteractionUsers:async(e,t)=>{const n=await r.findOne({where:{user_id:e}}),a=await r.findOne({where:{user_id:t}});if(!n||!a)throw new Error("User connections not found.");n.interaction_user_ids.includes(t)||n.set("interaction_user_ids",[...n.interaction_user_ids,t]),a.interaction_user_ids.includes(e)||a.set("interaction_user_ids",[...a.interaction_user_ids,e]),await n.save(),await a.save()}};return a[n]?await a[n]():await a.genericAction(n)}catch(e){throw console.error(`Action Failed: ${n}`,e.message),e}},getConnectionData:async(e,t)=>{const n=t?[t]:null,a=await r.findOne({where:{user_id:e},attributes:n});return a?t?a[t]:a:t?[]:{}},logUserAction:async e=>await s.create(e),getUserActions:async e=>await s.findAll({where:{user_id:e}}),getActionsByType:async e=>await s.findAll({where:{action_type:e}}),getEntityActions:async(e,t)=>await s.findAll({where:{entity_type:e,entity_id:t}}),countActionsByType:async e=>await s.count({where:{action_type:e}}),getRecentActions:async(e=10)=>await s.findAll({order:[["timestamp","DESC"]],limit:e}),getPopularEntities:async e=>await s.findAll({attributes:["entity_id",[u.fn("COUNT",u.col("entity_id")),"count"]],where:{entity_type:e},group:["entity_id"],order:[[u.literal("count"),"DESC"]],limit:10}),getActionsByDateRange:async(e,t)=>await s.findAll({where:{timestamp:{[a.between]:[e,t]}}}),deleteUserAction:async e=>{const t=await s.findByPk(e);if(!t)throw new Error("User action not found");return await t.destroy()},updateUserAction:async(e,t)=>{const n=await s.findByPk(e);if(!n)throw new Error("User action not found");return await n.update(t)}}},5356:(e,t,n)=>{const{UserLog:a}=n(9729);e.exports={createUserLog:async e=>await a.create(e),getAllUserLogs:async()=>await a.findAll(),getUserLogById:async e=>await a.findByPk(e),updateUserLog:async(e,t)=>{if(!await a.findByPk(e))throw new Error("User Log not found");return await a.update(t,{where:{id:e}})},deleteUserLog:async e=>{if(!await a.findByPk(e))throw new Error("User Log not found");return await a.destroy({where:{id:e}})},deleteLogsInRange:async(e,t)=>a.destroy({where:{login_at:{[Op.between]:[new Date(e),new Date(t)]}}})}},2350:(e,t,n)=>{const{hashPassword:a}=n(3300),{Op:s}=n(9031),{generateOTPTimestamped:o,verifyOTPTimestamped:r}=n(5963),{sendLaunchCodeEmail:i,sendVerificationEmail:l}=n(2149),{User:d,Role:c,Permission:u,Founder:p}=n(9729),{sequelize:m}=n(7075);e.exports={createUser:async e=>{const t=await m.MAIN_DB_NAME.transaction();try{e.password&&(e.password=await a(e.password));const{otp:n,expiryTime:s}=o();e.otp=n,e.expiryTime=s;const r={username:e.username,email:e.email,password:e.password,first_name:e.first_name,last_name:e.last_name,date_of_birth:e.date_of_birth,phone_number:e.phone_number,whatsapp_number:e.whatsapp_number,address:e.address,status:e.status||"active",role_id:e.role_id||2,user_metadata:e.user_metadata},l=await d.create(r,{transaction:t});let c=null;if(1===e.role_id&&e.founder_info){const n={user_id:l.id,...e.founder_info};c=await p.create(n,{transaction:t})}await t.commit();const u=(e,t)=>`http://localhost:5000/verify?userId=${e}&otp=${t}`,m=u(l._id,n);return await i(l.id,l.username,l.email,m,n),console.log("OTP Sent:",n),{newUser:l,founderInfo:c}}catch(e){throw await t.rollback(),new Error("Error creating user: "+e.message)}},verifyCreateUser:async e=>{try{const t=await d.findByPk(e);if(!t)throw new Error("User not found");const{launchCode:n,launchCodeExpiry:a}=t,{isValid:s,message:o}=r(e.launchCode,n,a);if(!s)throw new Error(o);return t.isVerified=!0,t.launchCode=null,t.launchCodeExpiry=null,await t.save(),await l(t.username,t.email),t}catch(e){throw new Error("Error creating user: "+e.message)}},getAllUsers:async()=>d.findAll({include:[c]}),getUserById:async e=>{const t=await d.findByPk(e,{include:{model:c}});if(!t)return null;if("Founder"===t.Role?.name){const n=await p.findOne({where:{user_id:e}});t.dataValues.founderData=n}return t},checkExistsEmail:async e=>await d.findOne({where:{email:e}}),checkExistsUsername:async e=>await d.findOne({where:{username:e}}),updateUser:async(e,t)=>{const n=await m.MAIN_DB_NAME.transaction();try{const a=await d.findByPk(e,{transaction:n});if(!a)throw new Error("User not found");const s={username:t.username??a.username,email:t.email??a.email,first_name:t.first_name??a.first_name,last_name:t.last_name??a.last_name,date_of_birth:t.date_of_birth??a.date_of_birth,phone_number:t.phone_number??a.phone_number,whatsapp_number:t.whatsapp_number??a.whatsapp_number,address:t.address??a.address,status:t.status??a.status,role_id:t.role_id??a.role_id,user_metadata:t.user_metadata?{...a.user_metadata,...t.user_metadata}:a.user_metadata};await a.update(s,{transaction:n});let o=null;if(1===(t.role_id??a.role_id)&&t.founder_info){const[a,s]=await p.findOrCreate({where:{user_id:e},defaults:{...t.founder_info},transaction:n});s||(Object.assign(a,t.founder_info),await a.save({transaction:n})),o=a}return await n.commit(),{updatedUser:a,updatedFounderInfo:o}}catch(e){throw await n.rollback(),new Error("Error updating user: "+e.message)}},deleteUser:e=>d.destroy({where:{id:e}}),deleteUserRanges:async(e,t)=>await d.destroy({where:{id:{[s.between]:[e,t]}}}),checkUserPermission:async(e,t)=>{const n=await d.findByPk(e,{include:{model:c,include:u}});if(!n)throw new Error("User not found");return(n.Roles||[]).flatMap((e=>e.Permissions||[])).some((e=>e.name===t))}}},2149:(e,t,n)=>{const a=n(7572),{registrationTemplate:s,passwordChangeTemplate:o,performanceTrackingTemplate:r,systemLogsTemplate:i,notificationTemplate:l}=n(6271),{User:d}=n(9729);e.exports={sendLaunchCodeEmail:async(e,t,n,s,o)=>{a(n,"Your Medical Service Launch Code","medicalLaunchCodeTemplate",{userId:e,userName:t,launchCode:o,verificationUrl:s})},sendVerificationEmail:async(e,t)=>{a(t,"Email Verification Successful","verificationTemplate",{userName:e})},sendResetPasswordCodeEmail:async(e,t,n,s,o,r)=>{a(n,"Reset Your Password","sendResetPasswordTemplate",{userId:e,userName:t,launchCode:r,verificationUrl:s,resetLink:o})},sendPasswordChangeEmail:async(e,t,n)=>{a(t,"Your Password has been Changed","passwordChangeTemplate",{userId:e,userName:n})},sendRegistrationEmail:async e=>{const t=await d.findByPk(e);if(!t)throw new Error("User not found");const n=s(t.name,"http:/localhost:5000/verify?token=abc123");a(t.email,"Welcome to [Your App Name] - Verify Your Email",n)},sendOtpEmail:async(e,t,n,s)=>{a(n,"Your OTP Code","otpTemplate",{userId:e,userName:t})},sendPasswordChangeConfirmation:async(e,t)=>{const n=await o(e);sendEmail(t,"Password Change Confirmation",n)},sendPerformanceTrackingEmail:async(e,t)=>{const n=await d.findByPk(e);if(!n)throw new Error("User not found");const s=r(t);a(n.email,"Performance Tracking Report",s)},sendSystemLogsEmail:async(e,t)=>{const n=await d.findByPk(e);if(!n)throw new Error("User not found");const s=i(t);a(n.email,"System Logs Report",s)},sendNotificationEmail:async(e,t,n)=>{const s=await d.findByPk(e);if(!s)throw new Error("User not found");const o=t,r=l(t,n);a(s.email,o,r)},uploadDocument:async(e,t,n="uploads")=>{const s=path.extname(e.originalname).toLowerCase().substring(1);if(!["pdf","docx","zip"].includes(s))throw new Error("Invalid file type. Only PDF, DOCX, and ZIP files are allowed.");const o=`${t}_${Date.now()}_${e.originalname}`,r=path.join(n,o);fs.writeFileSync(r,e.buffer);const i=user.email,l=`${process.env.BASE_URL}/uploads/${o}`;return a(i,"Document Uploaded Successfully",`\n    Hi there, your document has been successfully uploaded. \n    You can access it here: <a href="${l}">${l}</a>.\n  `),{fileName:o,uploadLink:l}}}},2158:(e,t,n)=>{const a=n(5942);e.exports={createIdea:async(e,t)=>{try{const n={ip:e.ip,userId:e.user.id},s=await a.createIdeaWithUserAction(n,e.body);t.status(201).json({result:s})}catch(e){t.status(400).json({error:e.message})}},getAllIdeas:async(e,t)=>{try{const e=await a.getAllIdeas();t.status(200).json({data:e})}catch(e){t.status(500).json({error:e.message})}},getIdeaById:async(e,t)=>{try{const n=await a.getIdeaById(e.params.id);t.status(200).json({data:n})}catch(e){t.status(404).json({error:e.message})}},getIdeaByUserId:async(e,t)=>{try{const n=await a.getIdeaByUserId(e.params.id);t.status(200).json({data:n})}catch(e){t.status(404).json({error:e.message})}},updateIdea:async(e,t)=>{try{const n=await a.updateIdea(e.params.id,e.body);t.status(200).json({result:n})}catch(e){t.status(400).json({error:e.message})}},deleteIdea:async(e,t)=>{try{await a.deleteIdea(e.params.id),t.status(204).send()}catch(e){t.status(500).json({error:e.message})}},incrementViews:async(e,t)=>{try{const n=await a.incrementViews(e.params.id);t.status(200).json({result:n})}catch(e){t.status(400).json({error:e.message})}},upvoteIdea:async(e,t)=>{try{console.log(e.user);const n=await a.upvoteIdea(e.params.id);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},addComment:async(e,t)=>{try{const n=await a.addComment(e.params.id,e.body.comment);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},searchIdeasByTitle:async(e,t)=>{try{const n=await a.searchIdeasByTitle(e.params.title);t.status(200).json({ideas:n})}catch(e){t.status(400).json({error:e.message})}},getLatestIdeas:async(e,t)=>{try{const e=await a.getLatestIdeas();t.status(200).json(e)}catch(e){t.status(400).json({error:e.message})}},getPopularIdeas:async(e,t)=>{try{const e=await a.getPopularIdeas();t.status(200).json(e)}catch(e){t.status(400).json({error:e.message})}},getRecommendedIdeas:async(e,t)=>{try{const e=await a.getRecommendedIdeas();t.status(200).json(e)}catch(e){t.status(400).json({error:e.message})}},getRelatedIdeas:async(e,t)=>{try{const n=await a.getRelatedIdeas(e.params.id);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},getIdeaComments:async(e,t)=>{try{const n=await a.getIdeaComments(e.params.id);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},followIdea:async(e,t)=>{try{const n=await a.followIdea(e.params.id);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},getIdeaFollowers:async(e,t)=>{try{const n=await a.getIdeaFollowers(e.params.id);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},reportIdea:async(e,t)=>{try{const n=await a.reportIdea(e.params.id);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},updateIdeaStatus:async(e,t)=>{try{const n=await a.updateIdeaStatus(e.params.id,e.body.status);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},getIdeasByStatus:async(e,t)=>{try{const n=await a.getIdeasByStatus(e.params.status);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},getIdeasByUser:async(e,t)=>{try{const n=await a.getIdeasByUser(e.params.userId);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},getFavoriteIdeas:async(e,t)=>{try{const n=await a.getFavoriteIdeas(e.params.userId);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},addToFavorites:async(e,t)=>{try{const n=await a.addToFavorites(e.params.userId,e.params.ideaId);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}},removeFromFavorites:async(e,t)=>{try{const n=await a.removeFromFavorites(e.params.userId,e.params.ideaId);t.status(200).json(n)}catch(e){t.status(400).json({error:e.message})}}}},7061:e=>{e.exports={databases:["MAIN"],prefixes:{main:"MEDSRV"},departmentMapping:{MEDSRV:"MAIN"},DEPARTMENTS:{MAIN:"Main"},paths:{MAIN:"../../Api/Models/Association"},DATABASE_KEYS:["MAIN_DB_NAME"],fileCategories:{images:["image/jpeg","image/png","image/gif"],videos:["video/mp4","video/mkv"],documents:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],spreadsheets:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],presentations:["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],textFiles:["text/plain"],csvFiles:["text/csv"]},sizeLimits:{smallest:1048576,smaller:5242880,small:10485760,medium:52428800,large:524288e3,larger:1073741824,extraLarge:2147483648,extraLargeer:3221225472,extraLargest:4294967296,largest:5368709120}}},7075:(e,t,n)=>{const a=n(5867),s=n(168),o=a;e.exports={pool:o,sequelize:s,TestMySQLConnection:async()=>{try{for(const[e,t]of Object.entries(a)){const n=await t.getConnection();console.log(`✅ Connected to MySQL database (${e}) successfully.`),n.release()}}catch(e){console.error(`❌ Error connecting to MySQL database: ${e.message}`,{stack:e.stack})}},TestSequelizeConnection:async()=>{try{for(const e in s)await s[e].authenticate(),console.log(`✅ Sequelize connection established successfully for database: ${e}`)}catch(e){console.error(`❌ Unable to connect to Sequelize database: ${e.message}`,{stack:e.stack})}}}},5867:(e,t,n)=>{n(818).config();const a=n(3498),{databases:s}=n(7061),o=process.env.P_DB_HOST,r=process.env.P_DB_USER,i=process.env.P_DB_PASSWORD,l={port:process.env.DB_PORT||3306,connectionLimit:10,multipleStatements:!0},d=s.reduce(((e,t)=>(e[`${t}_DB`]=(e=>({host:o,user:r,password:i,database:process.env[`${e}_DB_NAME`],...l}))(t),e)),{}),c=Object.entries(d).reduce(((e,[t,n])=>(e[t]=a.createPool(n),e)),{});e.exports=c},168:(e,t,n)=>{n(818).config();const{Sequelize:a}=n(9031),{databases:s}=n(7061),o=process.env.P_DB_HOST,r=process.env.P_DB_USER,i=process.env.P_DB_PASSWORD,l=process.env.DB_DIALECT||"mysql",d=process.env.DB_PORT||3306,c=s.reduce(((e,t)=>(e[`${t}_DB_NAME`]=process.env[`${t}_DB_NAME`],e)),{}),u=(()=>{const e={};for(const[t,n]of Object.entries(c))e[t]=new a(n,r,i,{host:o,dialect:l,port:d,logging:e=>console.log(e),pool:{max:15,min:0,acquire:6e4,idle:1e4}});return e})();e.exports=u},7572:(e,t,n)=>{const a=n(1572),s=n(6271),{ApplicationProperties:o}=n(9729);e.exports=async(e,t,n,r={},i=[])=>{try{const l=await o.findOne({where:{property_name:"app_email"}}),d=l?l.toJSON():null,c={...r,appName:d.metadata.appName||"Default App Name",supportEmail:d.metadata.emailSettings.username||"support@example.com",companyName:d.metadata.companyName||"Your Company",contactNumber:d.metadata.contactNumber||"123-456-7890"},u=s[n],p=await u(c),m={from:process.env.EMAIL_USER,to:e,subject:t,html:p,attachments:i},g=(e=>a.createTransport({service:e.metadata.emailSettings.service,auth:{user:e.metadata.emailSettings.username,pass:e.metadata.emailSettings.password}}))(d),y=await g.sendMail(m);return console.log(`Email sent to ${e} with subject "${t}". Message ID: ${y.messageId}`),y}catch(n){return console.error(`Failed to send email to ${e} with subject "${t}". Error: ${n.message}`),{success:!1,message:n.message}}}},6838:(e,t,n)=>{const a=n(2525)({contentSecurityPolicy:{directives:{defaultSrc:["'self'"],scriptSrc:["'self'","https://trustedscripts.example.com"],styleSrc:["'self'","https://trustedstyles.example.com"],imgSrc:["'self'","data:","https://trustedimages.example.com"],connectSrc:["'self'","https://trustedapi.example.com"],fontSrc:["'self'","https://trustedfonts.example.com"],frameSrc:["'none'"],objectSrc:["'none'"],upgradeInsecureRequests:[]}},frameguard:{action:"deny"},noCache:!0,referrerPolicy:{policy:"no-referrer"},hsts:{maxAge:31536e3,includeSubDomains:!0,preload:!0},xssFilter:!0,hidePoweredBy:!0,dnsPrefetchControl:{allow:!1},permittedCrossDomainPolicies:{policy:"none"}});console.log("✅ Security configuration applied with Helmet."),e.exports=a},8998:(e,t,n)=>{const a=n(5977)({secret:process.env.SESSION_SECRET||"yourSecretKey",resave:!1,saveUninitialized:!0,cookie:{secure:!1,maxAge:864e5,httpOnly:!0,secure:!0}});e.exports=a},7719:(e,t,n)=>{const a=n(9856),s=n(4437),o=a.createServer(),r=s(o,{cors:{origin:"*",methods:["GET","POST"]}});e.exports={io:r,server:o}},5963:(e,t,n)=>{const a=n(6982),s=(e=6,t=!1)=>{const n=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789":"0123456789",s=n.length;let o="";for(let t=0;t<e;t++)o+=n[(r=s,a.randomInt(0,r))];var r;return o};e.exports={generateOTP:s,verifyOTP:(e,t)=>e===t,generateOTPTimestamped:(e=8,t=3e5,n=!1)=>({otp:s(e,n),expiryTime:Date.now()+t}),verifyOTPTimestamped:(e,t,n)=>Date.now()>n?{isValid:!1,message:"OTP has expired"}:e===t?{isValid:!0,message:"OTP is valid"}:{isValid:!1,message:"Invalid OTP"},timeRemaining:e=>{const t=e-Date.now();return`${Math.floor(t/6e4)} min ${Math.floor(t%6e4/1e3)} sec remaining`}}},9167:(e,t,n)=>{n(818).config();const a={SECRET:process.env.JWT_SECRET||"2277c863a356e796a1bd600d1f3d219ef0632bf1635f431886796298558be460055faa328045100fbd0a8b4551c938595409",EXPIRATION:process.env.JWT_EXPIRATION||"1h",REDIS_URL:process.env.REDIS_HOST||"redis://redis-13742.c274.us-east-1-3.ec2.redns.redis-cloud.com"},s={SALT_ROUNDS:parseInt(process.env.SALT_ROUNDS,10)||10},o={WINDOW_MS:parseInt(process.env.RATE_LIMIT_WINDOW,10)||9e5,MAX_REQUESTS:parseInt(process.env.RATE_LIMIT_MAX,10)||100},r={SUPPORTED_LANGUAGES:process.env.SUPPORTED_LANGUAGES?process.env.SUPPORTED_LANGUAGES.split(","):["en","es","fr"],DEFAULT_LANGUAGE:process.env.DEFAULT_LANGUAGE||"en"};e.exports={JWT_CONFIG:a,SECURITY_CONFIG:s,RATE_LIMIT_CONFIG:o,APP_SETTINGS:r}},2061:(e,t,n)=>{const a=n(2003),{fileCategories:s,sizeLimits:o}=(n(9896),n(7061));e.exports={validateFile:(e,t)=>{if(!e||!e.mimetype||!e.size)return!1;if(!s[t])return!1;const{mimetype:n,size:a}=e;return!!s[t].includes(n)&&a<=(o[t]||o.large)},getUploadPath:(e,t)=>{const n=a.join(process.cwd(),"/UPLOAD_DIR",`${t}`);let o="Others";return s.images.includes(e.mimetype)&&(o="Images"),s.documents.includes(e.mimetype)&&(o="Documents"),s.csvFiles.includes(e.mimetype)&&(o="CSV"),s.videos.includes(e.mimetype)&&(o="Videos"),a.join(n,o)},generateFileUrl:(e,t,n)=>`/uploads/${n}/${t}/${e}`}},1925:(e,t,n)=>{n(6982);const{prefixes:a}=n(7061),s=e=>`${e}${Math.floor(1e5+9e5*Math.random()).toString()}`;e.exports={generateUniqueID:s,generateUniqueIDForHealth:e=>{const t=a[e];if(!t)throw new Error(`Invalid department name: ${e}`);return s(t)}}},1199:(e,t,n)=>{const a=n(829),{JWT_CONFIG:s}=n(9167),o=(n(8713),n(9764)),r=n(4131),i=(e,t=s.SECRET)=>{const n=o.findByPk(e.role_id,{include:{model:r,through:{attributes:["id","name"]}}}),i={id:e.id,role:e.role,permissions:n.Permissions};try{return a.sign(i,t,{expiresIn:s.EXPIRATION,algorithm:"HS256"})}catch(e){throw new Error("Token generation failed")}};e.exports={generateToken:i,verifyToken:(e,t=s.SECRET)=>{try{return a.verify(e,t)}catch(e){throw new Error("Token verification failed")}},decodeToken:e=>{try{const t=a.decode(e);if(!t)throw new Error("Invalid token format");return console.log("JWT decoded without verification:",{decoded:t}),{id:t.id,role:t.role}}catch(e){throw console.error("Error decoding JWT token:",e),new Error("Token decoding failed")}},refreshToken:(e,t=s.SECRET)=>{try{const n=a.verify(e,t,{ignoreExpiration:!0}),s=i(n,t);return console.log("JWT refreshed:",{userId:n.id}),s}catch(e){throw console.error("Error refreshing JWT token:",e),new Error("Token refresh failed")}},isTokenExpired:e=>{try{const t=a.decode(e);if(!t||!t.exp)throw new Error("Invalid token format");const n=Date.now()>=1e3*t.exp;return console.log("Token expiration status:",{isExpired:n}),n}catch(e){return console.error("Error checking token expiration:",e),!0}}}},7065:(e,t,n)=>{const{Message:a,Room:s,MediaStorage:o,Notification:r}=n(363);t.sendMessage=async(e,t)=>{try{const{roomId:n,content:s,media:i}=e.body;let l=null;i&&(l=(await o.create({filePath:i.filePath,fileType:i.fileType})).id);const d=await a.create({roomId:n,senderId:e.user.id,content:s,mediaStorageId:l});await r.create({userId:e.user.id,message:`New message in room: ${n}`,type:"NEW_MESSAGE"}),t.status(201).json({success:!0,message:d})}catch(e){t.status(500).json({error:"Error sending message"})}},t.getMessages=async(e,t)=>{try{t.status(200).json({success:!0,hii:"messages"})}catch(e){t.status(500).json({error:"Error fetching messages"})}}},4343:(e,t,n)=>{const a=n(6879);e.exports={getNotifications:async(e,t)=>{try{const n=e.user.id,{page:s,limit:o,sortBy:r,order:i,search:l,...d}=e.query,c=await a.getNotification(n,{page:parseInt(s)||1,limit:parseInt(o)||10,sortBy:r||"createdAt",order:i||"DESC",search:l||"",filters:d});return t.status(200).json({success:!0,message:"Notifications fetched successfully",data:c})}catch(e){return console.error("Error fetching notifications:",e),t.status(500).json({success:!1,message:"Failed to fetch notifications",error:e.message})}},deleteNotification:async(e,t)=>{try{const n=e.user.id,{notificationId:s}=e.query,o=await a.deleteNotification(n,s);t.status(200).json(o)}catch(e){t.status(500).json({message:e.message||"Failed to delete notification."})}}}},7583:(e,t,n)=>{const a=n(8287);e.exports={createRoom:async(e,t)=>{try{const n=await a.createRoom(e.body,e.user.id);t.status(201).json(n)}catch(e){t.status(e.statusCode||500).json({message:e.message})}},getRooms:async(e,t)=>{const{page:n,limit:s,...o}=e.query;try{const e=await a.getRooms(n,s,o);t.status(200).json(e)}catch(e){t.status(e.statusCode||500).json({message:e.message})}},getRoomByID:async(e,t)=>{try{const n=await a.getRoomByID(e.params.id);t.status(200).json(n)}catch(e){t.status(e.statusCode||500).json({message:e.message})}},joinRoom:async(e,t)=>{try{const n=await a.joinRoom(e.user.id,e.params.roomId);t.status(200).json(n)}catch(e){t.status(e.statusCode||500).json({message:e.message})}},updateRoom:async(e,t)=>{try{const n=await a.updateRoom(e.params.roomId,e.body,e.user.id);t.status(200).json(n)}catch(e){t.status(e.statusCode||500).json({message:e.message})}},deleteRoom:async(e,t)=>{try{const n=await a.deleteRoom(e.params.roomId,e.user.id);t.status(200).json(n)}catch(e){t.status(e.statusCode||500).json({message:e.message})}},leaveRoom:async(e,t)=>{try{const n=await a.leaveRoom(e.user.id,e.params.roomId);t.status(200).json(n)}catch(e){t.status(e.statusCode||500).json({message:e.message})}},removeUserFromRoom:async(e,t)=>{try{const n=await a.removeUserFromRoom(e.user.id,e.params.roomId,e.params.userId);t.status(200).json(n)}catch(e){t.status(e.statusCode||500).json({message:e.message})}},updateUserRole:async(e,t)=>{try{const n=await a.updateUserRole(e.user.id,e.params.roomId,e.params.userId,e.body.newRole);t.status(200).json(n)}catch(e){t.status(e.statusCode||500).json({message:e.message})}},getRoomMembers:async(e,t)=>{try{const n=await a.getRoomMembers(e.params.roomId);t.status(200).json(n)}catch(e){t.status(e.statusCode||500).json({message:e.message})}},getMessagesByRoom:async(e,t)=>{const{roomId:n,startMessageId:s,endMessageId:o}=e.query;try{const[e,r,i]=[parseInt(n),parseInt(s),parseInt(o)],l=await a.getMessagesByRoom(e,r,i);return t.status(200).json({messages:l})}catch(e){return t.status(e.statusCode||500).json({message:e.message})}}}},810:(e,t,n)=>{const{verifyToken:a}=n(1199),s=n(124),o=n(7899),{User:r,Role:i,Permission:l}=n(9729);e.exports=async(e,t)=>{try{const n=e.handshake.query.token||e.handshake.auth?.token||e.handshake.headers.authorization?.split(" ")[1];if(!n)throw new Error("Unauthorized: No token provided");const d=a(n),c=await r.findByPk(d.id,{include:[{model:i,include:{model:l,through:{attributes:[]}}}]});if(!c)throw new Error("Unauthorized: User not found");const u=e.handshake.headers["user-agent"]||"unknown",p=s.parse(u),m=p.device.family||"desktop",g=`${p.os.family||"unknown"} - ${p.family||"unknown"}`,y=e.handshake.headers["x-forwarded-for"]||e.handshake.address||"127.0.0.1",f=o.lookup(y),w=f?`${f.city||"unknown"}, ${f.country||"unknown"}`:"unknown";e.user={id:c.id,username:c.username,email:c.email},e.token=n,e.ip=y,e.authDetails={ip_address:y,user_agent:g,device_type:m,location:w},console.log("Socket authentication successful for:",e.user),t()}catch(e){console.error("Socket authentication error:",e.message),t(new Error("Authentication failed: "+e.message))}}},2823:(e,t,n)=>{const a=n(7252),s=a.Router(),o=a.Router(),r=a.Router(),i=a.Router(),l=(n(7065),n(4343)),d=n(7583);s.get("/",d.getMessagesByRoom),o.get("/",l.getNotifications).delete("/",l.deleteNotification),r.post("/",d.createRoom).get("/",d.getRooms).get("/:id",d.getRoomByID).post("/:roomId/join",d.joinRoom).put("/:roomId",d.updateRoom).delete("/:roomId",d.deleteRoom).post("/:roomId/leave",d.leaveRoom).delete("/:roomId/users/:userId",d.removeUserFromRoom).put("/:roomId/users/:userId/role",d.updateUserRole).get("/:roomId/members",d.getRoomMembers),e.exports={messageRouter:s,notificationRouter:o,roomRouter:r,userRouter:i}},8684:(e,t,n)=>{const{Message:a,Room:s,MessageReaction:o,Notification:r,MediaStorage:i,BlockedUser:l,RoomMembers:d,UserSettings:c}=n(363),{joinRoom:u,createRoom:p,getRooms:m,getRoomByID:g,updateRoom:y,deleteRoom:f,leaveRoom:w,removeUserFromRoom:h,updateUserRole:b,getRoomMembers:N,sendMessage:v,updateMessage:x,getMessagesByRoom:_}=n(8287);e.exports={chatService:(e,t)=>{console.log(`Chat service connected: ${e.id}`),(e=>{e.on("joinRoom",(async t=>{try{const n=await u(e.user.id,t);e.emit("roomJoined",{message:"Joined room successfully",roomId:n.id}),e.to(t).emit("userJoined",{userId:e.user.id,roomId:t})}catch(t){console.error("Error joining room:",t.message),e.emit("error",t.message||"Error joining room")}})),e.on("createRoom",(async t=>{try{const n=await p(t,e.user.id);e.emit("roomCreated",{message:"Room created successfully",roomId:n.id})}catch(t){console.error("Error creating room:",t.message),e.emit("error",t.message||"Error creating room")}})),e.on("getRooms",(async({page:t,limit:n,filters:a})=>{try{const s=await m(t,n,a);e.emit("roomsList",s)}catch(t){console.error("Error fetching rooms:",t.message),e.emit("error",t.message||"Error fetching rooms")}})),e.on("getRoomById",(async t=>{try{const n=await g(t);e.emit("roomDetails",n)}catch(t){console.error("Error fetching room:",t.message),e.emit("error",t.message||"Error fetching room")}})),e.on("updateRoom",(async({roomId:t,updateData:n})=>{try{const a=await y(t,n,e.user.id);e.emit("roomUpdated",a)}catch(t){console.error("Error updating room:",t.message),e.emit("error",t.message||"Error updating room")}})),e.on("deleteRoom",(async t=>{try{const n=await f(t,e.user.id);e.emit("roomDeleted",n)}catch(t){console.error("Error deleting room:",t.message),e.emit("error",t.message||"Error deleting room")}})),e.on("leaveRoom",(async t=>{try{const n=await w(e.user.id,t);e.emit("roomLeft",n),e.to(t).emit("userLeft",{userId:e.user.id,roomId:t})}catch(t){console.error("Error leaving room:",t.message),e.emit("error",t.message||"Error leaving room")}})),e.on("removeUserFromRoom",(async({requesterId:t,roomId:n,userId:a})=>{try{const s=await h(t,n,a);e.emit("userRemoved",s),e.to(n).emit("userRemoved",{userId:a})}catch(t){console.error("Error removing user:",t.message),e.emit("error",t.message||"Error removing user")}})),e.on("updateUserRole",(async({requesterId:t,roomId:n,userId:a,newRole:s})=>{try{const o=await b(t,n,a,s);e.emit("roleUpdated",o)}catch(t){console.error("Error updating role:",t.message),e.emit("error",t.message||"Error updating role")}})),e.on("getRoomMembers",(async t=>{try{const n=await N(t);e.emit("roomMembers",n)}catch(t){console.error("Error fetching members:",t.message),e.emit("error",t.message||"Error fetching members")}})),e.on("sendMessage",(async({data:t})=>{try{const n=await v(t);e.emit("messageSent",{message:"Message sent successfully",message:n}),e.to(t.roomId).emit("newMessage",{message:n})}catch(t){console.error("Error sending message:",t.message),e.emit("error",t.message||"Error sending message")}})),e.on("getMessagesByRoom",(async({roomId:t,startMessageId:n,endMessageId:a})=>{try{const s=await _(t,n,a);e.emit("messageGet",{message:"Message get successfully",message:s}),e.to(t).emit("newMessage",{message:s})}catch(t){console.error("Error getting message:",t.message),e.emit("error",t.message||"Error getting message")}})),e.on("updateMessage",(async({data:t})=>{try{const n=await x(t);e.emit("messageUpdate",{message:"Message update successfully",message:n}),e.to(t.roomId).emit("newMessage",{message:n})}catch(t){console.error("Error updating message:",t.message),e.emit("error",t.message||"Error updating message")}}))})(e)}}},6879:(e,t,n)=>{const a=n(774);e.exports={getNotification:async(e,{page:t=1,limit:n=10,sortBy:s="createdAt",order:o="DESC",search:r="",filters:i={}})=>{try{const l=(t-1)*n,d={userId:e,...i,...r&&{[Op.or]:[{title:{[Op.iLike]:`%${r}%`}},{message:{[Op.iLike]:`%${r}%`}}]}},c=await a.findAndCountAll({where:d,order:[[s,o]],limit:n,offset:l});return{total:c.count,pages:Math.ceil(c.count/n),currentPage:t,notifications:c.rows}}catch(e){throw e}},deleteNotification:async(e,t)=>{try{const n=await a.destroy({where:{id:t,userId:e}});if(0===n)throw new Error("Notification not found or already deleted.");return{message:"Notification deleted successfully.",deleted:n}}catch(e){throw e}},notificationService:(e,t,n)=>{console.log(`Notification service connected: ${e.id}`),e.on("send_notification",(async s=>{try{const{userId:o,type:r,title:i,message:l,roomId:d,isImportant:c}=s,u=await a.create({userId:o,type:r,title:i,message:l,roomId:d,isImportant:c,status:"sent",sentBy:e.user.id});n[o]?t.to(n[o].socketId).emit("receive_notification",{...u.toJSON(),from:"System"}):console.log(`User ${o} is offline. Notification saved in DB.`)}catch(e){console.error("Error sending notification:",e)}})),e.on("mark_as_read",(async e=>{try{const t=await a.findByPk(e);t&&(t.isRead=!0,t.readAt=new Date,await t.save(),console.log(`Notification ${e} marked as read.`))}catch(e){console.error("Error marking notification as read:",e)}})),e.on("disconnect",(()=>{console.log(`Socket ${e.id} disconnected from notification service`)}))}}},8287:(e,t,n)=>{const{Op:a}=n(9031),{Room:s,RoomMembers:o,User:r,Message:i,MessageReaction:l}=n(363),{sequelize:d}=n(7075),{getMessagesByRoom:c}=(n(9764),n(4131),n(7583));e.exports={createRoom:async(e,t)=>{const n=await d.MAIN_DB_NAME.transaction();try{const[a,r]=await s.findOrCreate({where:{name:e.name,createdBy:t},defaults:{...e,createdBy:t},transaction:n});if(!r)throw new Error("You already have a room with this name.");return await o.create({userId:t,roomId:a.id,role:"owner"},{transaction:n}),await n.commit(),a}catch(e){throw await n.rollback(),e.statusCode=e.statusCode||500,e}},getRooms:async(e=1,t=10,n={})=>{try{const i=(e-1)*t,l=[];return n.visibility&&l.push({visibility:n.visibility}),n.search&&l.push({[a.or]:[{name:{[a.like]:`%${n.search}%`}},{description:{[a.like]:`%${n.search}%`}}]}),await s.findAndCountAll({where:l.length?{[a.and]:l}:{},include:[{model:o,attributes:["role"],include:[{model:r,attributes:["id","username"]}]}],limit:parseInt(t),offset:i,order:[["createdAt","DESC"]]})}catch(e){throw e.statusCode=500,e}},getRoomByID:async e=>{try{const t=await s.findByPk(e,{include:[{model:o,include:[{model:r,attributes:["id","username"]}]}]});if(!t){const e=new Error("Room not found");throw e.statusCode=404,e}return t}catch(e){throw e.statusCode||(e.statusCode=500),e}},joinRoom:async(e,t)=>{const n=await d.MAIN_DB_NAME.transaction();try{const a=await s.findByPk(t,{transaction:n});if(!a)throw new Error("Room not found");if("private"===a.visibility)throw new Error("Cannot join private room without invitation");const[r,i]=await o.findOrCreate({where:{userId:e,roomId:t},defaults:{role:"member"},transaction:n});if(!i)throw new Error("User is already in the room");return await n.commit(),{message:"Joined room successfully",room:a}}catch(e){throw await n.rollback(),e.statusCode=e.statusCode||500,e}},updateRoom:async(e,t,n)=>{const a=await d.MAIN_DB_NAME.transaction();try{const o=await s.findByPk(e,{transaction:a});if(!o)throw new Error("Room not found");if(o.createdBy!==n)throw new Error("Unauthorized: You are not the room owner");return Object.assign(o,t),await o.save({transaction:a}),await a.commit(),{message:"Room updated successfully",updatedRoom:o}}catch(e){throw await a.rollback(),e.statusCode=e.statusCode||500,e}},deleteRoom:async(e,t)=>{const n=await d.MAIN_DB_NAME.transaction();try{const a=await s.findByPk(e,{transaction:n});if(!a)throw new Error("Room not found");if(a.createdBy!==t)throw new Error("Unauthorized: You are not the room owner");return await s.destroy({where:{id:e},transaction:n}),await n.commit(),{message:"Room deleted successfully",room:a}}catch(e){throw await n.rollback(),e.statusCode=e.statusCode||500,e}},leaveRoom:async(e,t)=>{const n=await d.MAIN_DB_NAME.transaction();try{const a=await s.findByPk(t,{transaction:n});if(!a)throw new Error("Room not found");if(a.createdBy===e)throw new Error("Room owner cannot leave. Transfer ownership first.");if(!await o.destroy({where:{userId:e,roomId:t},transaction:n}))throw new Error("User not in room");return await n.commit(),{message:"Left room successfully",room:a}}catch(e){throw await n.rollback(),e.statusCode=e.statusCode||500,e}},removeUserFromRoom:async(e,t,n)=>{const a=await d.transaction();try{const s=await o.findOne({where:{userId:e,roomId:t},transaction:a});if(!s||!["owner","admin"].includes(s.role))throw new Error("Insufficient permissions");const r=await o.findOne({where:{userId:n,roomId:t},transaction:a});if(!r)throw new Error("User not in room");if("owner"===r.role)throw new Error("Cannot remove room owner");if("admin"===s.role&&"admin"===r.role)throw new Error("Admins cannot remove other admins");return await r.destroy({transaction:a}),await a.commit(),{message:"User removed successfully"}}catch(e){throw await a.rollback(),e.statusCode=e.statusCode||500,e}},updateUserRole:async(e,t,n,a)=>{const s=await d.transaction();try{if(!["admin","member"].includes(a))throw new Error("Invalid role");const r=await o.findOne({where:{userId:e,roomId:t},transaction:s});if(!r||"owner"!==r.role)throw new Error("Only room owner can update roles");const i=await o.findOne({where:{userId:n,roomId:t},transaction:s});if(!i)throw new Error("User not in room");if("owner"===i.role)throw new Error("Cannot modify owner role");return i.role=a,await i.save({transaction:s}),await s.commit(),{message:"Role updated successfully"}}catch(e){throw await s.rollback(),e.statusCode=e.statusCode||500,e}},getRoomMembers:async e=>{try{return await o.findAll({where:{roomId:e},include:[{model:r,attributes:["id","username","email"]}],order:[["role","DESC"],["joinDate","ASC"]]})}catch(e){throw e.statusCode=500,e}},sendMessage:async e=>{try{return await i.create(e)}catch(e){throw new Error("Failed to send message")}},getMessagesByRoom:async(e,t,n)=>{try{return await i.findAll({where:{roomId:e,id:{[a.between]:[t,n]}},include:[{model:l}],order:[["createdAt","ASC"]],limit:n,offset:0})}catch(e){throw new Error("Failed to fetch messages")}},updateMessage:async(e,t)=>{try{const n=await i.findOne({where:{id:e,senderId:t}});if(!n)throw new Error("Message not found or unauthorized");return n.isDeleted=!0,n.deletedAt=new Date,await n.save(),n}catch(e){throw new Error("Failed to delete message")}}}},7560:(e,t,n)=>{n(6297),n(2658),e.exports={statService:(e,t)=>{console.log(`Stats service connected: ${e.id}`);const n=setInterval((async()=>{}),5e3);e.on("disconnect",(()=>{clearInterval(n),console.log(`Socket ${e.id} disconnected from stats service`)}))}}},4471:(e,t,n)=>{const a=n(7252),s=n(4716),o=n(810),{io:r,server:i}=n(7719),{chatService:l}=n(8684),{statService:d}=n(7560),{notificationService:c}=n(6879);a().use(a.json()),r.use(o),r.on("connection",(e=>{const t={};console.log(t),e.on("user_connected",(()=>{const n=e.user;n?t[n.id]?console.log(`User ${n.username} (${n.id}) is already online.`):(t[n.id]={socketId:e.id,username:n.username,lastActive:new Date},e.broadcast.emit("user_status_change",{userId:n.id,username:n.username,status:"online"}),console.log(t),console.log(`User ${n.username} (${n.id}) is online.`)):console.log("User authentication failed.")})),c(e,r,t),l(e,r,t),d(e,r,t),e.on("disconnect",(()=>{for(const[n,a]of Object.entries(t))if(a.socketId===e.id){console.log(`User ${a.username} (${n}) disconnected.`),e.broadcast.emit("user_status_change",{userId:n,username:a.username,status:"offline"}),delete t[n];break}}))})),process.on("SIGINT",(()=>{console.log("Shutting down server gracefully..."),i.close((()=>{console.log("Server closed."),process.exit(0)}))}));const u=process.env.PORT||8e3;i.listen(u,(()=>{console.log(`✅ WebSocket and HTTP server running on port ${u} - ${s().format("llll")}`)}))},8938:e=>{"use strict";e.exports=require("axios")},5486:e=>{"use strict";e.exports=require("bcrypt")},6898:e=>{"use strict";e.exports=require("cookie-parser")},8577:e=>{"use strict";e.exports=require("cors")},818:e=>{"use strict";e.exports=require("dotenv")},7252:e=>{"use strict";e.exports=require("express")},5977:e=>{"use strict";e.exports=require("express-session")},4652:e=>{"use strict";e.exports=require("fs-extra")},7899:e=>{"use strict";e.exports=require("geoip-lite")},2525:e=>{"use strict";e.exports=require("helmet")},9856:e=>{"use strict";e.exports=require("http")},2446:e=>{"use strict";e.exports=require("joi")},829:e=>{"use strict";e.exports=require("jsonwebtoken")},4716:e=>{"use strict";e.exports=require("moment")},8461:e=>{"use strict";e.exports=require("multer")},3498:e=>{"use strict";e.exports=require("mysql2/promise")},2703:e=>{"use strict";e.exports=require("node-cron")},1572:e=>{"use strict";e.exports=require("nodemailer")},2003:e=>{"use strict";e.exports=require("path")},5634:e=>{"use strict";e.exports=require("qrcode")},9031:e=>{"use strict";e.exports=require("sequelize")},4437:e=>{"use strict";e.exports=require("socket.io")},3968:e=>{"use strict";e.exports=require("speakeasy")},124:e=>{"use strict";e.exports=require("useragent")},6982:e=>{"use strict";e.exports=require("crypto")},9896:e=>{"use strict";e.exports=require("fs")}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}const a=n(9856),s=n(9896),o=n(2003),r=n(7252),i=n(8577),l=(n(4716),n(8203)),d=n(5226),c=n(7572),{InitializeDatabase:u}=n(1419),{TestSequelizeConnection:p,TestMySQLConnection:m}=n(7075),g=(n(8938),n(5776)),y=n(8996);n(818).config(),n(4471);const f=l();f.use(i());const w=a.createServer(f);(async()=>{try{await Promise.all([m(),p()]),u(),(()=>{f.get("/",((e,t)=>{t.sendFile(o.join(__dirname,"public","index.html"))})),f.post("/upload",y,g,((e,t)=>{const n="single"===e.headers["upload-type"]?e.file?[e.file]:[]:e.files;if(!n||0===n.length)return t.status(400).json({error:"No file uploaded!"});const a=n.map((e=>({fieldname:e.fieldname,originalName:e.originalname,encoding:e.encoding,mimetype:e.mimetype,destination:e.destination,filename:e.filename,path:e.path,size:e.size,fileUrl:`/uploads/${e.filename}`})));t.json({message:"File(s) uploaded successfully!",files:a})})),f.use("/uploads",r.static("UPLOAD_DIR"));const e=t=>{const n=[];try{s.readdirSync(t,{withFileTypes:!0}).forEach((a=>{const s=o.join(t,a.name);a.isDirectory()?n.push({name:a.name,type:"directory",children:e(s)}):n.push({name:a.name,type:"file"})}))}catch(e){console.error("Error reading directory:",e.message)}return n};f.get("/files",((t,n)=>{try{const t=e("UPLOAD_DIR");n.json({directoryTree:t})}catch(e){n.status(500).json({error:e.message})}})),f.post("/send-email",(async(e,t)=>{try{const{to:n,subject:a,text:s}=e.body;await c(n,a,s),t.status(200).send("Email sent successfully.")}catch(e){throw new Error("Failed to send email.")}})),f.use("/Api",d)})();const e=process.env.MAIN_SERVER_PORT||5e3;w.listen(e,(()=>{console.log(`✅ Main server running on port ${e} at ${(new Date).toLocaleString()}.`)}))}catch(e){throw new Error(`❌ Error during server startup: ${e.message}`)}})()})();